{"version":3,"sources":["webpack/universalModuleDefinition","webpack/bootstrap 39d31452cad34e4e4420","./src/index.ts","./src/core/Stage.ts","./src/core/Bitmap.ts","./src/core/FPS.ts","./src/core/RGBA.ts","./src/core/HSV.ts","./src/core/util.ts","./src/core/color.ts","./src/core/ticker.ts","./src/extra/PerlinNoise.ts","./src/loaders/loader.ts","./src/core/autosize.ts","./src/render/CanvasRenderer.ts","./src/render/WebGLRenderer.ts","./src/font/Micro.ts","./src/loaders/ImageDataLoader.ts","./src/loaders/BitmapLoader.ts","./src/loaders/TextLoader.ts","./src/loaders/JSONLoader.ts","./src/loaders/SpriteSheetLoader.ts","./src/loaders/SpriteSheetJSONLoader.ts","./src/loaders/MultiLoader.ts","./src/core/browser.ts","./src/core/SpriteSheet.ts","./src/core/Font.ts","./src/core/Char.ts"],"names":["rgb","hsv","Stage","Stage.constructor","Stage.resizeTo","Stage.render","Stage.destruct","Bitmap","Bitmap.constructor","Bitmap._resetData","Bitmap.resizeTo","Bitmap.setPixel","Bitmap.getPixel","Bitmap.fillRect","Bitmap.drawLineH","Bitmap.drawLineV","Bitmap.drawRect","Bitmap.fillCircle","Bitmap.drawCircle","Bitmap.shader","Bitmap.text","Bitmap.drawChar","Bitmap.blit","Bitmap.clear","Bitmap.clearAlpha","Bitmap.clipFromData","FPS","FPS.constructor","FPS.begin","FPS.end","RGBA","RGBA.constructor","HSV","HSV.constructor","rand","clamp","hsv2rgb","rgb2hsv","interval","interval.step","request","request.step","PerlinNoise","PerlinNoise.constructor","PerlinNoise.noise","PerlinNoise.fade","PerlinNoise.lerp","PerlinNoise.grad","PerlinNoise.scale","assertMode","AutoSize","AutoSize.constructor","AutoSize.scale","AutoSize.center","AutoSize.resize","AutoSize.stop","AutoSize.scaleTo","AutoSize.scaleFit","AutoSize.scaleAspect","AutoSize.moveScreenTo","AutoSize.moveScreenCenter","AutoSize.listen","AutoSize.unlisten","AutoSize.setMode","clearAlpha","CanvasRender","CanvasRender.constructor","CanvasRender.resize","CanvasRender.update","CanvasRender.destruct","loadShader","WebGLRender","WebGLRender.constructor","WebGLRender.resize","WebGLRender.update","WebGLRender.destruct","ImageDataLoader","ImageDataLoader.constructor","ImageDataLoader.load","BitmapLoader","BitmapLoader.constructor","BitmapLoader.load","getXHR","TextLoader","TextLoader.constructor","TextLoader.load","JSONLoader","JSONLoader.constructor","JSONLoader.load","SpriteSheetLoader","SpriteSheetLoader.constructor","SpriteSheetLoader.load","getURL","SpriteSheetJSONLoader","SpriteSheetJSONLoader.constructor","SpriteSheetJSONLoader.load","MultiLoader","MultiLoader.constructor","MultiLoader.load","getViewport","SpriteSheet","SpriteSheet.constructor","SpriteSheet.getSprite","SpriteSheet.getSpriteAt","SpriteSheet.addSprite","Font","Font.constructor","Char","Char.constructor"],"mappings":"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,CAAEA;SAEZA,CAACA,GAAGA,CAACA,GAAGA,CAACA,GAAGA,CAACA;SACbA,OAAOA,IAAIA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,CAACA,GAAGA,GAAGA,CAACA,EAAEA,IAAIA,CAACA,KAAKA,CAACA,CAACA,GAAGA,GAAGA,CAACA,EAAEA,IAAIA,CAACA,KAAKA,CAACA,CAACA,GAAGA,GAAGA,CAACA,CAACA;MAC9EA;;KAEDA,CAACA,IAAIA,EAAEA;KACPA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA;KACjBA,CAACA,GAAGA,CAACA,GAAGA,CAACA;KACTA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA;KACfA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA;KACnBA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,CAACA;;KAEzBA,QAAQA,CAACA,CAACA;SACTA,KAAKA,CAACA;aACLA,CAACA,GAAGA,CAACA;aACLA,CAACA,GAAGA,CAACA;aACLA,CAACA,GAAGA,CAACA;aACLA,KAAMA;AAAAA;SAEPA,KAAKA,CAACA;aACLA,CAACA,GAAGA,CAACA;aACLA,CAACA,GAAGA,CAACA;aACLA,CAACA,GAAGA,CAACA;aACLA,KAAMA;AAAAA;SAEPA,KAAKA,CAACA;aACLA,CAACA,GAAGA,CAACA;aACLA,CAACA,GAAGA,CAACA;aACLA,CAACA,GAAGA,CAACA;aACLA,KAAMA;AAAAA;SAEPA,KAAKA,CAACA;aACLA,CAACA,GAAGA,CAACA;aACLA,CAACA,GAAGA,CAACA;aACLA,CAACA,GAAGA,CAACA;aACLA,KAAMA;AAAAA;SAEPA,KAAKA,CAACA;aACLA,CAACA,GAAGA,CAACA;aACLA,CAACA,GAAGA,CAACA;aACLA,CAACA,GAAGA,CAACA;aACLA,KAAMA;AAAAA;SAEPA;aACCA,CAACA,GAAGA,CAACA;aACLA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AEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA;aAC7CA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,CAACA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,CAACA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA;aACjGA,GAAGA,EAAEA,CAACA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,CAACA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA;aAC/FA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA;aAC9FA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA;aAC/FA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,CAACA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA;aAC5FA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,CAACA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA;aAC7FA,CAACA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA;aAChGA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,CAACA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,CAACA;aAC3FA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA;aAC5FA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA;aAC7FA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,CAACA,EAAEA,GAAGA,EAAEA,GAAGA;aAC3FA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA;UAC1FA;SACDA,IAAIA,CAACA,CAACA,GAAGA,IAAIA,KAAKA,CAACA,GAAGA,CAACA;;SAEvBA,KAAKA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,GAAGA,EAAEA,CAACA,EAAEA,CAAEA;aAC7BA,IAAIA,CAACA,CAACA,CAACA,GAAGA,GAAGA,CAACA,CAACA,GAAGA,IAAIA,CAACA,CAACA,CAACA,CAACA,CAACA,GAAGA,IAAIA,CAACA,WAAWA,CAACA,CAACA,CAACA;UACjDA;KACFA,CAACA;KAEDD,wCAAMA,CAASA,EAAEA,CAASA,EAAEA,CAASA;SACpCE,IAAIA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,GAAGA,GAAGA;SAC3BA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,GAAGA,GAAGA;SAC3BA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,GAAGA,GAAGA;;SAE3BA,CAACA,IAAIA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA;SAClBA,CAACA,IAAIA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA;SAClBA,CAACA,IAAIA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA;;SAElBA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA;SACpBA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA;SACpBA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA;;SAEpBA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA;SACrBA,IAAIA,EAAEA,GAAGA,IAAIA,CAACA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA;SACtBA,IAAIA,EAAEA,GAAGA,IAAIA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA;;SAE1BA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA;SACzBA,IAAIA,EAAEA,GAAGA,IAAIA,CAACA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA;SACtBA,IAAIA,EAAEA,GAAGA,IAAIA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA;;SAG1BA,OAAOA,IAAIA,CAACA,KAAKA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,CAAGA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,CAACA,CAACA,EACtFA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,EAAEA,CAACA,CAACA,CAACA,EACpCA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,CAACA,EAC9CA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,CAACA,CAACA,CAACA,EAC1CA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,GAAGA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,CAACA,EAC9DA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,GAAGA,CAACA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,CAACA,CAACA,EAC5CA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,GAAGA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,CAACA,CAACA,EACtDA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,GAAGA,CAACA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,CAACA,CAACA,CAACA,CAACA,CAACA,CAACA;KACtDA,CAACA;;KAEDF,uCAAKA,CAASA;SACbG,OAAOA,CAACA,GAAGA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,GAAGA,EAAEA,CAACA,GAAGA,EAAEA,CAACA;KAC3CA,CAACA;;KAEDH,uCAAKA,CAASA,EAAEA,CAASA,EAAEA,CAASA;SACnCI,OAAOA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA;KACvBA,CAACA;;KAEDJ,uCAAKA,IAAYA,EAAEA,CAASA,EAAEA,CAASA,EAAEA,CAASA;SACjDK,IAAIA,CAACA,GAAGA,IAAIA,GAAGA,EAAEA;SACjBA,IAAIA,CAACA,GAAGA,CAACA,GAAGA,CAACA,GAAGA,CAACA,GAAGA,CAACA;SACrBA,IAAIA,CAACA,GAAGA,CAACA,GAAGA,CAACA,GAAGA,CAACA,GAAGA,CAACA,IAAIA,EAAEA,IAAIA,CAACA,IAAIA,EAAEA,GAAGA,CAACA,GAAGA,CAACA;SAC9CA,OAAOA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,IAAIA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,IAAIA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,CAACA;KACzDA,CAACA;;KAEDL,wCAAMA,CAASA;SACdM,OAAOA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA;KACnBA,CAACA;KACFN,mBAACA;AAADA,EAACA,IAAA;;AAED,6BAAqB,CACrB;;;;;;CCzFA,8CAA6D;AAA7D,0CAA6D;AAC7D,2CAAuD;AAAvD,oCAAuD;AACvD,yCAAmD;AAAnD,gCAAmD;AACnD,yCAAmD;AAAnD,gCAAmD;AACnD,gDAAiE;AAAjE,8CAAiE;AACjE,oDAAyE;AAAzE,sDAAyE;AACzE,0CAAqD;AAArD,kCAAqD;;AAGrD;KACC,mBAAW;KACX,uBAAe;KACf,oBAAY;KACZ,kBAAU;KACV,kBAAU;KACV,yBAAiB;KACjB,6BAAqB;EACrB;AACD;;;;;CChBA,aAAY;AAFZ,sCAKsC;;AAKtC,UAAS,UAAU,CAAC,SAAc;KACjCO,IAAIA,CAACA,OAAOA,SAASA,KAAKA,QAAQA,IAAIA,SAASA,GAAGA,CAACA,CAACA,IAChDA,SAASA,KAAKA,KAAKA,IACnBA,SAASA,KAAKA,KAAKA,IACnBA,SAASA,KAAKA,MAAMA,CAAEA;SACzBA,MAAOA;MACPA;KACDA,IAAIA,GAAGA,GAAGA,QAAQA,CAACA,SAASA,EAAEA,EAAEA,CAACA;KACjCA,IAAIA,CAACA,KAAKA,CAACA,GAAGA,CAACA,IAAIA,GAAGA,GAAGA,CAACA,CAAEA;SAC3BA,MAAOA;MACPA;KACDA,MAAMA,IAAIA,KAAKA,CAACA,iBAAiBA,GAAGA,SAASA,CAACA;AAC/CA,EAACA;;AAOD;KAOCC,kBAAYA,KAAYA,EAAEA,IAAmBA;SAA7CC,iBA+BCA;SA9BAA,IAAIA,CAACA,KAAKA,GAAGA,KAAKA;;SAElBA,IAAIA,GAAGA,IAAIA,IAAIA,EAAEA;SACjBA,IAAIA,CAACA,UAAUA,GAAGA,CAACA,CAACA,IAAIA,CAACA,MAAMA;SAC/BA,IAAIA,CAACA,SAASA,GAAGA,IAAIA,CAACA,KAAKA,IAAIA,MAAMA;SACrCA,UAAUA,CAACA,IAAIA,CAACA,SAASA,CAACA;;SAE1BA,KAAKA,CAACA,MAAMA,CAACA,KAAKA,CAACA,QAAQA,GAAGA,UAAUA;;SAExCA,IAAIA,CAACA,MAAMA,GAAGA,UAACA,KAAWA;aACzBA,IAAIA,QAAQA,GAAGA,OAAOA,CAACA,WAAWA,CAACA,CAACA;aACpCA,IAAIA,KAAIA,CAACA,SAASA,KAAKA,KAAKA,CAAEA;iBAC7BA,KAAIA,CAACA,QAAQA,CAACA,QAAQA,CAACA;cACvBA,MACIA,IAAIA,KAAIA,CAACA,SAASA,KAAKA,KAAKA,CAAEA;iBAClCA,KAAIA,CAACA,WAAWA,CAACA,QAAQA,CAACA;cAC1BA,KACIA;iBACJA,KAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,MAAMA,CAACA,CAACA;cAC5BA;;aAEDA,IAAIA,KAAIA,CAACA,UAAUA,IAAIA,KAAIA,CAACA,SAASA,KAAKA,KAAKA,CAAEA;iBAChDA,KAAIA,CAACA,gBAAgBA,CAACA,QAAQA,CAACA;cAC/BA,KACIA;iBACJA,KAAIA,CAACA,YAAYA,CAACA,CAACA,EAAEA,CAACA,CAACA;cACvBA;SACFA,CAACA;;SAEDA,IAAIA,CAACA,OAAOA,CAACA,IAAIA,CAACA,SAASA,EAAEA,IAAIA,CAACA,UAAUA,CAACA;KAC9CA,CAACA;KAGDD,qCAAMA,IAASA;SACdE,IAAIA,CAACA,OAAOA,CAACA,IAAIA,EAAEA,IAAIA,CAACA,UAAUA,CAACA;KACpCA,CAACA;;KAEDF,sCAAOA,MAAsBA;SAAtBG,2CAAMA,GAAYA,IAAIA;AAAAA,SAC5BA,IAAIA,CAACA,OAAOA,CAACA,IAAIA,CAACA,SAASA,EAAEA,MAAMA,CAACA;KACrCA,CAACA;;KAEDH;SACCI,IAAIA,CAACA,MAAMA,CAACA,CAACA;KACdA,CAACA;;KAEDJ;SACCK,IAAIA,CAACA,QAAQA,CAACA,CAACA;KAChBA,CAACA;;KAEDL,uCAAgBA,KAAaA,EAAEA,MAAcA;SAC5CM,IAAIA,CAACA,SAASA,GAAGA,MAAMA;SACvBA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,KAAKA,GAAGA,KAAKA;SAC/BA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,MAAMA,GAAGA,MAAMA;SACjCA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,MAAMA,CAACA,CAACA;KAC7BA,CAACA;;KAEDN,wCAAiBA,QAAgBA;SAChCO,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,KAAKA,GAAGA,QAAQA,CAACA,KAAKA;SACxCA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,MAAMA,GAAGA,QAAQA,CAACA,MAAMA;SAC1CA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,MAAMA,CAACA,CAACA;KAC7BA,CAACA;;KAEDP,2CAAoBA,QAAgBA;SACnCQ,IAAIA,KAAKA,GAAGA,IAAIA,CAACA,GAAGA,CAACA,QAAQA,CAACA,KAAKA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,EAAEA,QAAQA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA;SAC5FA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,KAAKA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,GAAGA,KAAKA,CAACA;SAC9DA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,GAAGA,KAAKA,CAACA;SAChEA,IAAIA,CAACA,KAAKA,CAACA,QAAQA,CAACA,MAAMA,CAACA,CAACA;KAC7BA,CAACA;;KAEDR,4CAAqBA,CAASA,EAAEA,CAASA;SACxCS,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,KAAKA,CAACA,IAAIA,GAAGA,CAACA,GAAGA,IAAIA;SACvCA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,KAAKA,CAACA,GAAGA,GAAGA,CAACA,GAAGA,IAAIA;KACvCA,CAACA;;KAEDT,gDAAyBA,QAAgBA;SACxCU,IAAIA,CAACA,YAAYA,CAACA,IAAIA,CAACA,KAAKA,CAACA,CAACA,QAAQA,CAACA,KAAKA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,KAAKA,CAACA,GAAGA,CAACA,CAACA,EAC3EA,IAAIA,CAACA,KAAKA,CAACA,CAACA,QAAQA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,CAACA,MAAMA,CAACA,GAAGA,CAACA,CAACA,CAACA;KAC/DA,CAACA;;KAEDV;SACCW,IAAIA,CAACA,QAAQA,CAACA,CAACA;SACfA,IAAIA,IAAIA,CAACA,UAAUA,IAAIA,IAAIA,CAACA,SAASA,KAAKA,KAAKA,CAAEA;aAChDA,MAAMA,CAACA,gBAAgBA,CAACA,QAAQA,EAAEA,IAAIA,CAACA,MAAMA,CAACA;UAC9CA;KACFA,CAACA;;KAEDX;SACCY,MAAMA,CAACA,mBAAmBA,CAACA,QAAQA,EAAEA,IAAIA,CAACA,MAAMA,CAACA;KAClDA,CAACA;;KAEDZ,uCAAgBA,IAASA,EAAEA,MAAeA;SACzCa,UAAUA,CAACA,IAAIA,CAACA;;SAEhBA,IAAIA,CAACA,SAASA,GAAGA,IAAIA;;SAErBA,IAAIA,KAAKA,GAAGA,QAAQA,CAACA,IAAIA,CAACA,SAASA,EAAEA,EAAEA,CAACA;SACxCA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,CAACA,CAAEA;aAClBA,IAAIA,CAACA,SAASA,GAAGA,KAAKA;aACtBA,IAAIA,CAACA,OAAOA,CAACA,IAAIA,CAACA,KAAKA,CAACA,IAAIA,CAACA,KAAKA,CAACA,KAAKA,GAAGA,KAAKA,CAACA,EAAEA,IAAIA,CAACA,KAAKA,CAACA,IAAIA,CAACA,KAAKA,CAACA,MAAMA,GAAGA,KAAKA,CAACA,CAACA;aACzFA,IAAIA,CAACA,QAAQA,CAACA,CAACA;UACfA;SACDA,IAAIA,IAAIA,CAACA,SAASA,KAAKA,KAAKA,CAAEA;aAC7BA,IAAIA,CAACA,YAAYA,CAACA,CAACA,EAAEA,CAACA,CAACA;UACvBA;SACDA,IAAIA,MAAMA,IAAIA,IAAIA,CAACA,SAASA,KAAKA,KAAKA,IAAIA,IAAIA,CAACA,SAASA,KAAKA,KAAKA,CAAEA;aACnEA,IAAIA,CAACA,MAAMA,CAACA,CAACA;UACbA;SACDA,IAAIA,CAACA,MAAMA,CAACA,CAACA;KACdA,CAACA;KACFb,gBAACA;AAADA,EAACA,IAAA;AArHD,6BAqHC;AACD;;;;;CCjJA,aAAY;AAFZ,UAQS,UAAU,CAAC,IAAgB;KACnCc,IAAIA,GAAGA,GAAGA,IAAIA,CAACA,MAAMA;KACrBA,KAAKA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,GAAGA,EAAEA,CAACA,EAAEA,CAAEA;SAC7BA,IAAIA,CAACA,CAACA,CAACA,GAAGA,GAAGA;MACbA;AACFA,EAACA;;AAGD;KAUCC,sBAAYA,MAAcA,EAAEA,MAAyBA;SACpDC,IAAIA,CAACA,MAAMA,GAAGA,MAAMA;;SAEpBA,IAAIA,CAACA,EAAEA,GAAGA,MAAMA,CAACA,IAAIA;SACrBA,IAAIA,CAACA,KAAKA,GAAGA,MAAMA,CAACA,KAAKA;SACzBA,IAAIA,CAACA,MAAMA,GAAGA,MAAMA,CAACA,MAAMA;SAC3BA,IAAIA,CAACA,QAAQA,GAAGA,MAAMA,CAACA,QAAQA,GAAGA,CAACA,GAAGA,CAACA;;SAEvCA,IAAIA,CAACA,GAAGA,GAAGA,IAAIA,CAACA,MAAMA,CAACA,UAAUA,CAACA,IAAIA,CAACA;;SAGvCA,IAAIA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,GAAGA,CAACA,eAAeA,CAACA,IAAIA,CAACA,MAAMA,CAACA,KAAKA,EAAEA,IAAIA,CAACA,MAAMA,CAACA,MAAMA,CAACA;;SAG7EA,UAAUA,CAACA,IAAIA,CAACA,MAAMA,CAACA,IAAIA,CAACA;;SAE5BA,IAAIA,CAACA,GAAGA,CAACA,YAAYA,CAACA,IAAIA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,CAACA,CAACA;KACzCA,CAACA;KAEDD;SACCE,IAAIA,IAAIA,CAACA,MAAMA,CAACA,KAAKA,KAAKA,IAAIA,CAACA,MAAMA,CAACA,KAAKA,IAAIA,IAAIA,CAACA,MAAMA,CAACA,MAAMA,KAAKA,IAAIA,CAACA,MAAMA,CAACA,MAAMA,CAAEA;aACzFA,IAAIA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,GAAGA,CAACA,eAAeA,CAACA,IAAIA,CAACA,MAAMA,CAACA,KAAKA,EAAEA,IAAIA,CAACA,MAAMA,CAACA,MAAMA,CAACA;;aAE7EA,UAAUA,CAACA,IAAIA,CAACA,MAAMA,CAACA,IAAIA,CAACA;UAC5BA;KACFA,CAACA;;KAEDF;SACCG,IAAIA,IAAIA,GAAGA,IAAIA,CAACA,MAAMA,CAACA,IAAIA;SAC3BA,IAAIA,KAAKA,GAAGA,IAAIA,CAACA,MAAMA,CAACA,KAAKA;SAC7BA,IAAIA,MAAMA,GAAGA,IAAIA,CAACA,MAAMA,CAACA,MAAMA;;SAE/BA,IAAIA,EAAEA,GAAGA,IAAIA,CAACA,KAAKA,GAAGA,KAAKA;SAC3BA,IAAIA,EAAEA,GAAGA,IAAIA,CAACA,MAAMA,GAAGA,MAAMA;;SAE7BA,KAAKA,IAAIA,EAAEA,GAAGA,CAACA,EAAEA,EAAEA,GAAGA,MAAMA,EAAEA,EAAEA,EAAEA,CAAEA;aACnCA,KAAKA,IAAIA,EAAEA,GAAGA,CAACA,EAAEA,EAAEA,GAAGA,KAAKA,EAAEA,EAAEA,EAAEA,CAAEA;iBAClCA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,EAAEA,GAAGA,EAAEA,CAACA;iBAC3BA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,EAAEA,GAAGA,EAAEA,CAACA;iBAC3BA,IAAIA,IAAIA,GAAGA,CAACA,CAACA,GAAGA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,GAAGA,IAAIA,CAACA,QAAQA;iBAC/CA,IAAIA,KAAKA,GAAGA,CAACA,EAAEA,GAAGA,EAAEA,GAAGA,KAAKA,CAACA,GAAGA,CAACA;;iBAEjCA,IAAIA,CAACA,KAAKA,CAACA,GAAGA,IAAIA,CAACA,EAAEA,CAACA,IAAIA,CAACA;iBAC3BA,IAAIA,CAACA,KAAKA,GAAGA,CAACA,CAACA,GAAGA,IAAIA,CAACA,EAAEA,CAACA,IAAIA,GAAGA,CAACA,CAACA;iBACnCA,IAAIA,CAACA,KAAKA,GAAGA,CAACA,CAACA,GAAGA,IAAIA,CAACA,EAAEA,CAACA,IAAIA,GAAGA,CAACA,CAACA;cACnCA;UACDA;SACDA,IAAIA,CAACA,GAAGA,CAACA,YAAYA,CAACA,IAAIA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,CAACA,CAACA;KACzCA,CAACA;;KAEDH;SACCI,IAAIA,CAACA,EAAEA,GAAGA,IAAIA;SACdA,IAAIA,CAACA,GAAGA,GAAGA,IAAIA;SACfA,IAAIA,CAACA,MAAMA,GAAGA,IAAIA;SAClBA,IAAIA,CAACA,MAAMA,GAAGA,IAAIA;KACnBA,CAACA;KACFJ,oBAACA;AAADA,EAACA,IAAA;;AAED,8BAAsB,CACtB;;;;;;CCnFA,aAAY;AAFZ,KAOI,kBAAkB,GAAG;KAExB,4BAA4B;KAC5B,4BAA4B;KAG5B,0BAA0B;KAE1B,eAAe;KAEf,2CAA2C;KAE3C,8BAA8B;KAC9B,GAAG;EACH,CAAC,IAAI,CAAC,IAAI,CAAC;;AAEZ,KAAI,oBAAoB,GAAG;KAE1B,0BAA0B;KAG1B,4BAA4B;KAG5B,0BAA0B;KAE1B,eAAe;KAEf,oDAAoD;KACpD,GAAG;EACH,CAAC,IAAI,CAAC,IAAI,CAAC;;AAEZ,UAAS,UAAU,CAAC,EAAE,EAAE,YAAY,EAAE,UAAU;KAC/CK,IAAIA,MAAMA,GAAGA,EAAEA,CAACA,YAAYA,CAACA,UAAUA,CAACA;KACxCA,EAAEA,CAACA,YAAYA,CAACA,MAAMA,EAAEA,YAAYA,CAACA;KACrCA,EAAEA,CAACA,aAAaA,CAACA,MAAMA,CAACA;;KAGxBA,IAAIA,QAAQA,GAAGA,EAAEA,CAACA,kBAAkBA,CAACA,MAAMA,EAAEA,EAAEA,CAACA,cAAcA,CAACA;KAC/DA,IAAIA,CAACA,QAAQA,CAAEA;SACdA,MAAMA,IAAIA,KAAKA,CAACA,0BAA0BA,GAAGA,MAAMA,GAAGA,IAAIA,GAAGA,EAAEA,CAACA,gBAAgBA,CAACA,MAAMA,CAACA,CAACA;MACzFA;KACDA,OAAOA,MAAMA;AACdA,EAACA;;AAED;KAcCC,qBAAYA,MAAcA,EAAEA,MAAyBA;SACpDC,IAAIA,CAACA,MAAMA,GAAGA,MAAMA;SACpBA,IAAIA,CAACA,KAAKA,GAAGA,MAAMA,CAACA,KAAKA;SACzBA,IAAIA,CAACA,MAAMA,GAAGA,MAAMA,CAACA,MAAMA;;SAG3BA,IAAIA,CAACA,EAAEA,GAAGA,IAAIA,UAAUA,CAACA,MAAMA,CAACA,MAAMA,CAACA;;SAGvCA,IAAIA,CAACA,MAAMA,CAACA,qBAAqBA,CAAEA;aAClCA,MAAMA,IAAIA,KAAKA,CAACA,gCAAgCA,CAACA;UACjDA;;SAGDA,IAAIA,MAAMA,GAAGA,EAACA,KAAKA,EAAEA,KAAKA,EAACA;;SAK3BA,IAAIA,EAAEA,GAAGA,IAAIA,CAACA,EAAEA,GAAGA,IAAIA,CAACA,MAAMA,CAACA,UAAUA,CAACA,OAAOA,EAAEA,MAAMA,CAACA,IAAIA,IAAIA,CAACA,MAAMA,CAACA,UAAUA,CAACA,oBAAoBA,EAAEA,MAAMA,CAACA;SAClHA,IAAIA,CAACA,EAAEA,CAAEA;aACRA,MAAMA,IAAIA,KAAKA,CAACA,gCAAgCA,CAACA;UACjDA;;SAKDA,IAAIA,OAAOA,GAAGA,EAAEA,CAACA,aAAaA,CAACA,CAACA;;SAGhCA,EAAEA,CAACA,YAAYA,CAACA,OAAOA,EAAEA,UAAUA,CAACA,EAAEA,EAAEA,kBAAkBA,EAAEA,EAAEA,CAACA,aAAaA,CAACA,CAACA;SAC9EA,EAAEA,CAACA,YAAYA,CAACA,OAAOA,EAAEA,UAAUA,CAACA,EAAEA,EAAEA,oBAAoBA,EAAEA,EAAEA,CAACA,eAAeA,CAACA,CAACA;SAClFA,EAAEA,CAACA,WAAWA,CAACA,OAAOA,CAACA;;SAGvBA,IAAIA,MAAMA,GAAGA,EAAEA,CAACA,mBAAmBA,CAACA,OAAOA,EAAEA,EAAEA,CAACA,WAAWA,CAACA;SAC5DA,IAAIA,CAACA,MAAMA,CAAEA;aAEZA,MAAMA,IAAIA,KAAKA,CAACA,CAACA,2BAA2BA,GAAGA,EAAEA,CAACA,iBAAiBA,CAACA,OAAOA,CAACA,CAACA,CAACA;UAC9EA;SACDA,EAAEA,CAACA,UAAUA,CAACA,OAAOA,CAACA;;SAGtBA,IAAIA,CAACA,gBAAgBA,GAAGA,EAAEA,CAACA,iBAAiBA,CAACA,OAAOA,EAAEA,YAAYA,CAACA;SACnEA,IAAIA,CAACA,gBAAgBA,GAAGA,EAAEA,CAACA,iBAAiBA,CAACA,OAAOA,EAAEA,YAAYA,CAACA;;SAGnEA,IAAIA,CAACA,cAAcA,GAAGA,EAAEA,CAACA,YAAYA,CAACA,CAACA;SACvCA,EAAEA,CAACA,UAAUA,CAACA,EAAEA,CAACA,YAAYA,EAAEA,IAAIA,CAACA,cAAcA,CAACA;;SAEnDA,EAAEA,CAACA,uBAAuBA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA;SACjDA,EAAEA,CAACA,mBAAmBA,CAACA,IAAIA,CAACA,gBAAgBA,EAAEA,CAACA,EAAEA,EAAEA,CAACA,KAAKA,EAAEA,KAAKA,EAAEA,CAACA,EAAEA,CAACA,CAACA;;SAGvEA,EAAEA,CAACA,UAAUA,CAACA,EAAEA,CAACA,YAAYA,EAAEA,IAAIA,YAAYA,CAACA;aAC/CA,CAACA,GAAGA,EAAEA,CAACA,GAAGA;aACVA,GAAGA,EAAEA,CAACA,GAAGA;aACTA,CAACA,GAAGA,EAAEA,GAAGA;aACTA,CAACA,GAAGA,EAAEA,GAAGA;aACTA,GAAGA,EAAEA,CAACA,GAAGA;aACTA,GAAGA,EAAEA,GAAGA;UACRA,CAACA,EAAEA,EAAEA,CAACA,WAAWA,CAACA;;SAGnBA,IAAIA,CAACA,cAAcA,GAAGA,EAAEA,CAACA,YAAYA,CAACA,CAACA;SACvCA,EAAEA,CAACA,UAAUA,CAACA,EAAEA,CAACA,YAAYA,EAAEA,IAAIA,CAACA,cAAcA,CAACA;;SAEnDA,EAAEA,CAACA,uBAAuBA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA;SACjDA,EAAEA,CAACA,mBAAmBA,CAACA,IAAIA,CAACA,gBAAgBA,EAAEA,CAACA,EAAEA,EAAEA,CAACA,KAAKA,EAAEA,KAAKA,EAAEA,CAACA,EAAEA,CAACA,CAACA;;SAGvEA,EAAEA,CAACA,UAAUA,CAACA,EAAEA,CAACA,YAAYA,EAAEA,IAAIA,YAAYA,CAACA;aAC/CA,GAAGA,EAAEA,GAAGA;aACRA,GAAGA,EAAEA,GAAGA;aACRA,GAAGA,EAAEA,GAAGA;aACRA,GAAGA,EAAEA,GAAGA;aACRA,GAAGA,EAAEA,GAAGA;aACRA,GAAGA,EAAEA,GAAGA;UACRA,CAACA,EAAEA,EAAEA,CAACA,WAAWA,CAACA;;SAGnBA,IAAIA,CAACA,OAAOA,GAAGA,EAAEA,CAACA,aAAaA,CAACA,CAACA;SACjCA,EAAEA,CAACA,WAAWA,CAACA,EAAEA,CAACA,UAAUA,EAAEA,IAAIA,CAACA,OAAOA,CAACA;;SAG3CA,EAAEA,CAACA,aAAaA,CAACA,EAAEA,CAACA,UAAUA,EAAEA,EAAEA,CAACA,cAAcA,EAAEA,EAAEA,CAACA,aAAaA,CAACA;SACpEA,EAAEA,CAACA,aAAaA,CAACA,EAAEA,CAACA,UAAUA,EAAEA,EAAEA,CAACA,cAAcA,EAAEA,EAAEA,CAACA,aAAaA,CAACA;SACpEA,EAAEA,CAACA,aAAaA,CAACA,EAAEA,CAACA,UAAUA,EAAEA,EAAEA,CAACA,kBAAkBA,EAAEA,EAAEA,CAACA,OAAOA,CAACA;SAClEA,EAAEA,CAACA,aAAaA,CAACA,EAAEA,CAACA,UAAUA,EAAEA,EAAEA,CAACA,kBAAkBA,EAAEA,EAAEA,CAACA,OAAOA,CAACA;;SAGlEA,EAAEA,CAACA,UAAUA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,CAACA,CAACA;SACzBA,EAAEA,CAACA,KAAKA,CAACA,EAAEA,CAACA,gBAAgBA,CAACA;;SAG7BA,EAAEA,CAACA,SAASA,CAACA,IAAIA,EAAEA,IAAIA,EAAEA,IAAIA,EAAEA,KAAKA,CAACA;;SAGrCA,EAAEA,CAACA,QAAQA,CAACA,CAACA,EAAEA,CAACA,EAAEA,IAAIA,CAACA,MAAMA,CAACA,KAAKA,EAAEA,IAAIA,CAACA,MAAMA,CAACA,MAAMA,CAACA;KACzDA,CAACA;KAEDD;SACCE,IAAIA,CAACA,EAAEA,CAACA,QAAQA,CAACA,CAACA,EAAEA,CAACA,EAAEA,IAAIA,CAACA,MAAMA,CAACA,KAAKA,EAAEA,IAAIA,CAACA,MAAMA,CAACA,MAAMA,CAACA;SAC7DA,IAAIA,CAACA,EAAEA,CAACA,KAAKA,CAACA,IAAIA,CAACA,EAAEA,CAACA,gBAAgBA,CAACA;KACxCA,CAACA;;KAEDF;SAECG,IAAIA,CAACA,EAAEA,CAACA,UAAUA,CAACA,IAAIA,CAACA,EAAEA,CAACA,UAAUA,EAAEA,CAACA,EAAEA,IAAIA,CAACA,EAAEA,CAACA,GAAGA,EAAEA,IAAIA,CAACA,KAAKA,EAAEA,IAAIA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,IAAIA,CAACA,EAAEA,CAACA,GAAGA,EAAEA,IAAIA,CAACA,EAAEA,CAACA,aAAaA,EAAEA,IAAIA,CAACA,EAAEA,CAACA;;SAE/HA,IAAIA,CAACA,EAAEA,CAACA,UAAUA,CAACA,IAAIA,CAACA,EAAEA,CAACA,SAASA,EAAEA,CAACA,EAAEA,CAACA,CAACA;KAC5CA,CAACA;;KAEDH;SACCI,IAAIA,CAACA,EAAEA,CAACA,KAAKA,CAACA,IAAIA,CAACA,EAAEA,CAACA,gBAAgBA,CAACA;;SAEvCA,IAAIA,CAACA,EAAEA,GAAGA,IAAIA;SACdA,IAAIA,CAACA,EAAEA,GAAGA,IAAIA;SACdA,IAAIA,CAACA,MAAMA,GAAGA,IAAIA;KACnBA,CAACA;KACFJ,mBAACA;AAADA,EAACA,IAAA;;AAED,6BAAqB,CACrB;;;;;;CC3LA,aAAY;AAFZ,mCAIsC;;AAUtC,KAAI,IAAI,GAAG,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC,EAAE;KAC/B,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;MACJ;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,GAAG;SACH,GAAG;SACH,GAAG;SACH,GAAG;MACH;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;MACJ;KACD,GAAG,EAAE;SACJ,OAAO;SACP,OAAO;SACP,OAAO;SACP,OAAO;MACP;KACD,GAAG,EAAE;SACJ,MAAM;SACN,MAAM;SACN,MAAM;SACN,MAAM;MACN;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,OAAO;SACP,OAAO;SACP,OAAO;SACP,OAAO;MACP;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,GAAG;SACH,GAAG;SACH,GAAG;SACH,GAAG;MACH;KACD,GAAG,EAAE;SACJ,GAAG;SACH,GAAG;SACH,GAAG;SACH,GAAG;MACH;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,GAAG;SACH,GAAG;SACH,GAAG;SACH,GAAG;MACH;KACD,GAAG,EAAE;SACJ,GAAG;SACH,GAAG;SACH,GAAG;SACH,GAAG;MACH;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;MACJ;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;MACJ;KACD,GAAG,EAAE;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;MACJ;KACD,GAAG,EAAE;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;MACJ;KACD,GAAG,EAAE;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;MACJ;KACD,GAAG,EAAE;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;MACJ;KACD,GAAG,EAAE;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;MACJ;KACD,IAAI,EAAE;SACL,GAAG;SACH,GAAG;SACH,GAAG;SACH,GAAG;MACH;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;SACJ,IAAI;MACJ;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,GAAG,EAAE;SACJ,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;KACD,IAAI,EAAE;SACL,KAAK;SACL,KAAK;SACL,KAAK;SACL,KAAK;MACL;EACD,CAAC;;AAEF,sBAAc,CACd;;;;;;CC5WA,aAAY;AAFZ;KAUCK,yBAAYA,GAAWA;SACtBC,IAAIA,CAACA,GAAGA,GAAGA,GAAGA;KACfA,CAACA;KAEDD,2CAAKA,QAA+CA;SAApDE,iBAuBCA;SAtBAA,IAAIA,KAAKA,GAAGA,QAAQA,CAACA,aAAaA,CAACA,KAAKA,CAACA;SACzCA,KAAKA,CAACA,MAAMA,GAAGA;aACdA,IAAIA,MAAMA,GAAGA,QAAQA,CAACA,aAAaA,CAACA,QAAQA,CAACA;aAC7CA,MAAMA,CAACA,KAAKA,GAAGA,KAAKA,CAACA,KAAKA;aAC1BA,MAAMA,CAACA,MAAMA,GAAGA,KAAKA,CAACA,MAAMA;;aAE5BA,IAAIA,GAAGA,GAAGA,MAAMA,CAACA,UAAUA,CAACA,IAAIA,CAACA;aACjCA,GAAGA,CAACA,SAASA,CAACA,KAAKA,EAAEA,CAACA,EAAEA,CAACA,CAACA;;aAE1BA,QAAQA,CAACA,IAAIA,EAAEA,GAAGA,CAACA,YAAYA,CAACA,CAACA,EAAEA,CAACA,EAAEA,KAAKA,CAACA,KAAKA,EAAEA,KAAKA,CAACA,MAAMA,CAACA,CAACA;;aAEjEA,KAAKA,CAACA,MAAMA,GAAGA,IAAIA;aACnBA,KAAKA,CAACA,OAAOA,GAAGA,IAAIA;SACrBA,CAACA;SACDA,KAAKA,CAACA,OAAOA,GAAGA;aACfA,QAAQA,CAACA,IAAIA,KAAKA,CAACA,cAAcA,GAAGA,KAAIA,CAACA,GAAGA,CAACA,EAAEA,IAAIA,CAACA;;aAEpDA,KAAKA,CAACA,MAAMA,GAAGA,IAAIA;aACnBA,KAAKA,CAACA,OAAOA,GAAGA,IAAIA;SACrBA,CAACA;;SAEDA,KAAKA,CAACA,GAAGA,GAAGA,IAAIA,CAACA,GAAGA;KACrBA,CAACA;KACFF,uBAACA;AAADA,EAACA,IAAA;;AAED,iCAAyB,CACzB;;;;;;CCvCA,aAAY;AAFZ,oCAI0C;;AAG1C,8CAAsD;;AAEtD;KAICG,sBAAYA,GAAWA,EAAEA,QAAyBA;SAAzBC,+CAAQA,GAAYA,KAAKA;AAAAA,SACjDA,IAAIA,CAACA,GAAGA,GAAGA,GAAGA;SACdA,IAAIA,CAACA,QAAQA,GAAGA,QAAQA;KACzBA,CAACA;KAEDD,wCAAKA,QAA8CA;SAAnDE,iBA6BCA;SA5BAA,IAAIA,eAAeA,CAACA,IAAIA,CAACA,GAAGA,CAACA,CAACA,IAAIA,CAACA,UAACA,GAAGA,EAAEA,KAAKA;aAC7CA,IAAIA,GAAGA,CAAEA;iBACRA,QAAQA,CAACA,GAAGA,EAAEA,IAAIA,CAACA;iBACnBA,MAAOA;cACPA;;aAEDA,IAAIA,KAAIA,CAACA,QAAQA,CAAEA;iBAClBA,QAAQA,CAACA,IAAIA,EAAEA,IAAIA,MAAMA,CAACA,KAAKA,CAACA,KAAKA,EAAEA,KAAKA,CAACA,MAAMA,EAAEA,IAAIA,EAAEA,KAAKA,CAACA,IAAIA,CAACA,MAAMA,CAACA,CAACA;cAC9EA,KACIA;iBAEJA,IAAIA,MAAMA,GAAGA,IAAIA,MAAMA,CAACA,KAAKA,CAACA,KAAKA,EAAEA,KAAKA,CAACA,MAAMA,EAAEA,KAAKA,CAACA;iBACzDA,IAAIA,IAAIA,GAAGA,KAAKA,CAACA,IAAIA;iBACrBA,IAAIA,KAAKA,GAAGA,KAAKA,CAACA,KAAKA;;iBAEvBA,KAAKA,IAAIA,EAAEA,GAAGA,CAACA,EAAEA,EAAEA,GAAGA,KAAKA,CAACA,MAAMA,EAAEA,EAAEA,EAAEA,CAAEA;qBACzCA,KAAKA,IAAIA,EAAEA,GAAGA,CAACA,EAAEA,EAAEA,GAAGA,KAAKA,EAAEA,EAAEA,EAAEA,CAAEA;yBAClCA,IAAIA,IAAIA,GAAGA,CAACA,EAAEA,GAAGA,KAAKA,GAAGA,EAAEA,CAACA,GAAGA,CAACA;yBAChCA,IAAIA,KAAKA,GAAGA,CAACA,EAAEA,GAAGA,KAAKA,GAAGA,EAAEA,CAACA,GAAGA,CAACA;;yBAEjCA,MAAMA,CAACA,IAAIA,CAACA,KAAKA,CAACA,GAAGA,IAAIA,CAACA,IAAIA,CAACA;yBAC/BA,MAAMA,CAACA,IAAIA,CAACA,KAAKA,GAAGA,CAACA,CAACA,GAAGA,IAAIA,CAACA,IAAIA,GAAGA,CAACA,CAACA;yBACvCA,MAAMA,CAACA,IAAIA,CAACA,KAAKA,GAAGA,CAACA,CAACA,GAAGA,IAAIA,CAACA,IAAIA,GAAGA,CAACA,CAACA;sBACvCA;kBACDA;iBACDA,QAAQA,CAACA,IAAIA,EAAEA,MAAMA,CAACA;cACtBA;SACFA,CAACA,CAACA;KACHA,CAACA;KACFF,oBAACA;AAADA,EAACA,IAAA;;AAED,8BAAsB,CACtB;;;;;;CCjDA,aAAY;AAFZ,UAOS,MAAM;KACdG,IAAIA,cAAcA,CAAEA;SACnBA,OAAOA,IAAIA,cAAcA,CAACA,CAACA;MAC3BA;KACDA,IAAIA;SACHA,OAAOA,IAAIA,aAAaA,CAACA,oBAAoBA,CAACA;MAC9CA,CACDA,OAAOA,CAACA,CAAEA;MACTA;KACDA,IAAIA;SACHA,OAAOA,IAAIA,aAAaA,CAACA,oBAAoBA,CAACA;MAC9CA,CACDA,OAAOA,CAACA,CAAEA;MACTA;KACDA,IAAIA;SACHA,OAAOA,IAAIA,aAAaA,CAACA,mBAAmBA,CAACA;MAC7CA,CACDA,OAAOA,CAACA,CAAEA;MACTA;KACDA,MAAMA,IAAIA,KAAKA,CAACA,+CAA+CA,CAACA;AACjEA,EAACA;;AAED;KAGCC,oBAAYA,GAAWA;SACtBC,IAAIA,CAACA,GAAGA,GAAGA,GAAGA;KACfA,CAACA;KAEDD,sCAAKA,QAA4CA;SAChDE,IAAIA;aACHA,IAAIA,GAAGA,GAAGA,MAAMA,CAACA,CAACA;UAClBA,CACDA,OAAOA,CAACA,CAAEA;aACTA,QAAQA,CAACA,CAACA,EAAEA,IAAIA,CAACA;aACjBA,MAAOA;UACPA;SACDA,GAAGA,CAACA,kBAAkBA,GAAGA;aACxBA,IAAIA,GAAGA,CAACA,UAAUA,KAAKA,CAACA,CAAEA;iBACzBA,QAAQA,CAACA,IAAIA,EAAEA,GAAGA,CAACA,YAAYA,CAACA;cAChCA;SACFA,CAACA;;SAEDA,GAAGA,CAACA,IAAIA,CAACA,KAAKA,EAAEA,IAAIA,CAACA,GAAGA,EAAEA,IAAIA,CAACA;SAC/BA,GAAGA,CAACA,gBAAgBA,CAACA,kBAAkBA,EAAEA,gBAAgBA,CAACA;SAC1DA,GAAGA,CAACA,IAAIA,CAACA,IAAIA,CAACA;KACfA,CAACA;KACFF,kBAACA;AAADA,EAACA,IAAA;;AAED,4BAAoB,CACpB;;;;;;CCvDA,aAAY;AAFZ,yCAK4C;;AAE5C;KAGCG,oBAAYA,GAAWA;SACtBC,IAAIA,CAACA,GAAGA,GAAGA,GAAGA;KACfA,CAACA;KAEDD,sCAAKA,QAAyCA;SAC7CE,IAAIA,UAAUA,CAACA,IAAIA,CAACA,GAAGA,CAACA,CAACA,IAAIA,CAACA,UAACA,GAAGA,EAAEA,IAAIA;aACvCA,IAAIA,GAAGA,CAAEA;iBACRA,QAAQA,CAACA,GAAGA,EAAEA,IAAIA,CAACA;iBACnBA,MAAOA;cACPA;aACDA,IAAIA;iBACHA,IAAIA,GAAGA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,IAAIA,CAACA;cAC1BA,CACDA,OAAOA,CAACA,CAAEA;iBACTA,QAAQA,CAACA,CAACA,EAAEA,IAAIA,CAACA;cACjBA;aACDA,QAAQA,CAACA,IAAIA,EAAEA,GAAGA,CAACA;SAEpBA,CAACA,CAACA;KACHA,CAACA;KACFF,kBAACA;AAADA,EAACA,IAAA;;AAED,4BAAoB,CACpB;;;;;;CC/BA,aAAY;AAFZ,oCAI0C;AAC1C,0CAAoD;;AAGpD,8CAAsD;;AAGtD;KAKCG,2BAAYA,GAAWA,EAAEA,IAAsBA,EAAEA,QAAyBA;SAAzBC,+CAAQA,GAAYA,KAAKA;AAAAA,SACzEA,IAAIA,CAACA,GAAGA,GAAGA,GAAGA;SACdA,IAAIA,CAACA,IAAIA,GAAGA,IAAIA;SAChBA,IAAIA,CAACA,QAAQA,GAAGA,QAAQA;KACzBA,CAACA;KAEDD,6CAAKA,QAAmDA;SAAxDE,iBAyBCA;SAxBAA,IAAIA,eAAeA,CAACA,IAAIA,CAACA,GAAGA,CAACA,CAACA,IAAIA,CAACA,UAACA,GAAUA,EAAEA,KAAgBA;aAC/DA,IAAIA,GAAGA,CAAEA;iBACRA,QAAQA,CAACA,GAAGA,EAAEA,IAAIA,CAACA;iBACnBA,MAAOA;cACPA;;aAMDA,IAAIA,WAAWA,GAAGA,CAACA,KAAIA,CAACA,IAAIA,CAACA,WAAWA,IAAIA,CAACA,CAACA;aAC9CA,IAAIA,WAAWA,GAAGA,CAACA,KAAIA,CAACA,IAAIA,CAACA,WAAWA,IAAIA,CAACA,CAACA;;aAE9CA,IAAIA,KAAKA,GAAGA,IAAIA,WAAWA,CAACA,KAAIA,CAACA,IAAIA,CAACA,QAAQA,EAAEA,KAAIA,CAACA,IAAIA,CAACA,QAAQA,CAACA;;aAEnEA,KAAKA,IAAIA,EAAEA,GAAGA,CAACA,EAAEA,EAAEA,GAAGA,KAAIA,CAACA,IAAIA,CAACA,QAAQA,EAAEA,EAAEA,EAAEA,CAAEA;iBAC/CA,KAAKA,IAAIA,EAAEA,GAAGA,CAACA,EAAEA,EAAEA,GAAGA,KAAIA,CAACA,IAAIA,CAACA,QAAQA,EAAEA,EAAEA,EAAEA,CAAEA;qBAC/CA,IAAIA,CAACA,GAAGA,WAAWA,GAAGA,EAAEA,GAAGA,CAACA,KAAIA,CAACA,IAAIA,CAACA,KAAKA,GAAGA,WAAWA,CAACA;qBAC1DA,IAAIA,CAACA,GAAGA,WAAWA,GAAGA,EAAEA,GAAGA,CAACA,KAAIA,CAACA,IAAIA,CAACA,KAAKA,GAAGA,WAAWA,CAACA;qBAC1DA,KAAKA,CAACA,SAASA,CAACA,MAAMA,CAACA,YAAYA,CAACA,KAAKA,CAACA,IAAIA,EAAEA,KAAKA,CAACA,KAAKA,EAAEA,KAAKA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,KAAIA,CAACA,IAAIA,CAACA,KAAKA,EAAEA,KAAIA,CAACA,IAAIA,CAACA,KAAKA,EAAEA,KAAIA,CAACA,QAAQA,CAACA,CAACA;kBACrIA;cACDA;aACDA,QAAQA,CAACA,IAAIA,EAAEA,KAAKA,CAACA;SACtBA,CAACA,CAACA;KACHA,CAACA;KACFF,yBAACA;AAADA,EAACA,IAAA;;AAED,mCAA2B,CAC3B;;;;;;CCjDA,aAAY;AAFZ,yCAO4C;AAC5C,gDAA0D;;AAG1D,KAAI,MAAM,GAAG,uBAAuB;;AAEpC,UAAS,MAAM,CAAC,IAAY,EAAE,MAAc;KAC3CG,MAAMA,CAACA,SAASA,GAAGA,CAACA;KACpBA,IAAIA,KAAKA,GAAGA,MAAMA,CAACA,IAAIA,CAACA,IAAIA,CAACA;KAC7BA,OAAOA,KAAKA,CAACA,CAACA,CAACA,GAAGA,KAAKA,CAACA,CAACA,CAACA,GAAGA,MAAMA;AACpCA,EAACA;;AAGD;KAKCC,+BAAYA,GAAWA,EAAEA,QAAyBA;SAAzBC,+CAAQA,GAAYA,KAAKA;AAAAA,SACjDA,IAAIA,CAACA,GAAGA,GAAGA,GAAGA;SACdA,IAAIA,CAACA,QAAQA,GAAGA,QAAQA;KACzBA,CAACA;KAEDD,iDAAKA,QAAkDA;SAAvDE,iBASCA;SARAA,IAAIA,UAAUA,CAACA,IAAIA,CAACA,GAAGA,CAACA,CAACA,IAAIA,CAACA,UAACA,GAAGA,EAAEA,IAAsBA;aACzDA,IAAIA,GAAGA,CAAEA;iBACRA,QAAQA,CAACA,GAAGA,EAAEA,IAAIA,CAACA;iBACnBA,MAAOA;cACPA;aACDA,OAAOA,CAACA,GAAGA,CAACA,IAAIA,CAACA;aACjBA,IAAIA,iBAAiBA,CAACA,MAAMA,CAACA,KAAIA,CAACA,GAAGA,EAAEA,IAAIA,CAACA,KAAKA,CAACA,EAAEA,IAAIA,EAAEA,KAAIA,CAACA,QAAQA,CAACA,CAACA,IAAIA,CAACA,QAAQA,CAACA;SACxFA,CAACA,CAACA;KACHA,CAACA;KACFF,6BAACA;AAADA,EAACA,IAAA;;AAED,uCAA+B,CAC/B;;;;;;CCzCA,aAAY;AAFZ;KASCG,qBAAYA,OAAmBA;SAA/BC,iBAMCA;SARDA,KAAQA,MAAMA,GAAcA,EAAEA,CAACA;SAG9BA,IAAIA,OAAOA,CAAEA;aACZA,OAAOA,CAACA,OAAOA,CAACA,UAACA,MAAMA;iBACtBA,KAAIA,CAACA,MAAMA,CAACA,IAAIA,CAACA,MAAMA,CAACA;aACzBA,CAACA,CAACA;UACFA;KACFA,CAACA;KAEDD,uCAAKA,QAA8CA;SAAnDE,iBA2BCA;SA1BAA,IAAIA,OAAOA,GAAGA,KAAKA;SACnBA,IAAIA,OAAOA,GAAGA,IAAIA,KAAKA,CAACA,IAAIA,CAACA,MAAMA,CAACA,MAAMA,CAACA;;SAI3CA,IAAIA,CAACA,MAAMA,CAACA,OAAOA,CAACA,UAACA,MAAMA,EAAEA,KAAKA;aACjCA,MAAMA,CAACA,IAAIA,CAACA,UAACA,GAAGA,EAAEA,GAAGA;iBACpBA,IAAIA,OAAOA,CAAEA;qBACZA,MAAOA;kBACPA;iBACDA,IAAIA,GAAGA,CAAEA;qBACRA,OAAOA,CAACA,GAAGA,CAACA,MAAMA,CAACA,GAAGA,CAACA;qBACvBA,OAAOA,CAACA,KAAKA,CAACA,GAAGA,CAACA;qBAClBA,QAAQA,CAACA,GAAGA,EAAEA,IAAIA,CAACA;qBACnBA,OAAOA,GAAGA,IAAIA;qBACdA,MAAOA;kBACPA;iBACDA,OAAOA,CAACA,KAAKA,CAACA,GAAGA,GAAGA;iBACpBA,KAAIA,CAACA,MAAMA,CAACA,KAAKA,CAACA,GAAGA,IAAIA;;iBAEzBA,IAAIA,KAAIA,CAACA,MAAMA,CAACA,KAAKA,CAACA,gBAAMA;4BAAIA,CAACA,MAAMA;iBAAPA,CAAOA,CAACA,CAAEA;qBACzCA,QAAQA,CAACA,GAAGA,EAAEA,OAAOA,CAACA;qBACtBA,KAAIA,CAACA,MAAMA,GAAGA,IAAIA;kBAClBA;aACFA,CAACA,CAACA;SACHA,CAACA,CAACA;KACHA,CAACA;KACFF,mBAACA;AAADA,EAACA,IAAA;;AAED,6BAAqB,CACrB;;;;;;CC9CA,aAAY;AAFZ,UAOgB,WAAW;KAC1BG,IAAIA,CAACA,GAAQA,MAAMA;KACnBA,IAAIA,CAACA,GAAGA,OAAOA;KACfA,IAAIA,CAACA,CAACA,YAAYA,IAAIA,MAAMA,CAAEA,CAAEA;SAC/BA,CAACA,GAAGA,QAAQA;SACZA,CAACA,GAAGA,QAAQA,CAACA,eAAeA,IAAIA,QAAQA,CAACA,IAAIA;MAC7CA;KACDA,OAAOA,EAACA,KAAKA,EAAEA,CAACA,CAACA,CAACA,GAAGA,OAAOA,CAACA,EAAEA,MAAMA,EAAEA,CAACA,CAACA,CAACA,GAAGA,QAAQA,CAACA,EAACA;AACxDA,EAACA;AARD,mCAQC;AACD;;;;;CCdA,aAAY;AAFZ;KAcCC,qBAAYA,KAAaA,EAAEA,MAAcA;SAJzCC,KAAQA,OAAOA,GAAaA,EAAEA,CAACA;SAK9BA,IAAIA,CAACA,KAAKA,GAAGA,KAAKA;SAClBA,IAAIA,CAACA,MAAMA,GAAGA,MAAMA;KACrBA,CAACA;KAEDD,4CAAUA,CAASA,EAAEA,CAASA;SAC7BE,OAAOA,IAAIA,CAACA,WAAWA,CAACA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,GAAGA,CAACA,CAACA;KAC5CA,CAACA;;KAEDF,8CAAYA,KAAaA;SACxBG,IAAIA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,KAAKA,CAACA,CAAEA;aAC9BA,MAAMA,IAAIA,KAAKA,CAACA,uBAAuBA,CAACA;UACxCA;SACDA,OAAOA,IAAIA,CAACA,OAAOA,CAACA,KAAKA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,CAACA;KACjDA,CAACA;;KAEDH,4CAAUA,MAAcA;SACvBI,IAAIA,CAACA,OAAOA,CAACA,IAAIA,CAACA,MAAMA,CAACA;KAC1BA,CAACA;KACFJ,mBAACA;AAADA,EAACA,IAAA;;AAED,6BAAqB,CACrB;;;;;;CClCA,aAAY;AAFZ,mCAIgC;;AAEhC;KAOCK,cAAYA,IAAYA,EAAEA,MAAcA,EAAEA,IAAYA;SAAtDC,iBAQCA;SAPAA,IAAIA,CAACA,IAAIA,GAAGA,IAAIA;SAChBA,IAAIA,CAACA,MAAMA,GAAGA,MAAMA;SACpBA,IAAIA,CAACA,KAAKA,GAAGA,MAAMA,CAACA,MAAMA,CAACA,IAAIA,CAACA;;SAEhCA,MAAMA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,OAAOA,CAACA,UAACA,IAAIA;aAC9BA,KAAIA,CAACA,KAAKA,CAACA,IAAIA,CAACA,GAAGA,IAAIA,IAAIA,CAACA,IAAIA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,CAACA;SAC9CA,CAACA,CAACA;KACHA,CAACA;KACFD,YAACA;AAADA,EAACA,IAAA;;AAED,sBAAc,CACd;;;;;;CCvBA,aAAY;AAFZ;KAUCE,cAAYA,IAAYA,EAAEA,GAAaA;SACtCC,IAAIA,CAACA,IAAIA,GAAGA,IAAIA;SAChBA,IAAIA,CAACA,KAAKA,GAAGA,GAAGA,CAACA,CAACA,CAACA,CAACA,MAAMA;SAC1BA,IAAIA,CAACA,GAAGA,GAAGA,EAAEA;;SAEbA,KAAKA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,GAAGA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,CAAEA;aACpCA,IAAIA,IAAIA,GAAGA,GAAGA,CAACA,CAACA,CAACA;aACjBA,KAAKA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,CAAEA;iBACrCA,IAAIA,CAACA,GAAGA,CAACA,IAAIA,CAACA,CAACA,IAAIA,CAACA,MAAMA,CAACA,CAACA,CAACA,KAAKA,GAAGA,CAACA,CAACA;cACvCA;UACDA;KACFA,CAACA;KACFD,YAACA;AAADA,EAACA,IAAA;;AAED,sBAAc,CACd","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pixelbutler\"] = factory();\n\telse\n\t\troot[\"pixelbutler\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);","/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nexport import Stage = require('./core/Stage');\r\n\r\nexport import Bitmap = require('./core/Bitmap');\r\nexport import FPS = require('./core/FPS');\r\n\r\nimport RGBA = require('./core/RGBA');\r\nimport HSV = require('./core/HSV');\r\n\r\nexport import PerlinNoise = require('./extra/PerlinNoise');\r\n\r\nexport import loader = require('./loaders/loader');\r\n\r\nimport _util = require('./core/util');\r\nexport import rand = _util.rand;\r\n\r\nimport _color = require('./core/color');\r\nexport import rgb2hsv = _color.rgb2hsv;\r\nexport import hsv2rgb = _color.hsv2rgb;\r\n\r\nexport import ticker = require('./core/ticker');\r\n\r\nexport function rgb(r: number, g: number, b: number): RGBA {\r\n\treturn new RGBA(r, g, b);\r\n}\r\n// TODO clean hsv alias thingy?\r\nvar hsvTmp = new HSV();\r\nexport function hsv(h: number, s: number, v: number): RGBA {\r\n\thsvTmp.h = h;\r\n\thsvTmp.s = s;\r\n\thsvTmp.v = v;\r\n\treturn hsv2rgb(hsvTmp);\r\n}\r\n\r\n// fake stuff for compiler bug (borked unused-imports-optimiser errornously removes exports)\r\n[\r\n\tloader,\r\n\tPerlinNoise,\r\n\t_util,\r\n\t_color,\r\n\tticker,\r\n\tRGBA,\r\n\tHSV,\r\n\tBitmap,\r\n\tFPS,\r\n\tStage\r\n];\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport IOptions = require('./../types/IOptions');\r\n\r\nimport Bitmap = require('./Bitmap');\r\n\r\nimport IRenderer = require('./../render/IRenderer');\r\nimport CanvasRenderer = require('./../render/CanvasRenderer');\r\nimport WebGLRenderer = require('./../render/WebGLRenderer');\r\n\r\nimport IAutoSize = require('../types/IAutoSize');\r\nimport autosize = require('./autosize');\r\n\r\nclass Stage extends Bitmap {\r\n\r\n\tpublic canvas: HTMLCanvasElement;\r\n\tpublic renderer: IRenderer;\r\n\r\n\tpublic autoSize: IAutoSize;\r\n\r\n\tconstructor(opts: IOptions) {\r\n\t\tsuper((opts.width || 32), (opts.height || 32), false);\r\n\t\r\n\t\t// grab canvas stuff\r\n\t\tthis.canvas = <HTMLCanvasElement>(typeof opts.canvas === 'string' ? document.getElementById(opts.canvas) : opts.canvas);\r\n\t\tif (!this.canvas) {\r\n\t\t\tthrow new Error('cannot locate canvas with id \"' + opts.canvas + '\"');\r\n\t\t}\r\n\r\n\t\tthis.clear();\r\n\r\n\t\t// optional renderer\r\n\t\tif (opts.renderer !== 'canvas') {\r\n\t\t\ttry {\r\n\t\t\t\tthis.renderer = new WebGLRenderer(this, this.canvas);\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tconsole.log('render init error, switching to fallback');\r\n\t\t\t}\r\n\t\t}\r\n\t\t// default & fallback\r\n\t\tif (!this.renderer) {\r\n\t\t\tthis.renderer = new CanvasRenderer(this, this.canvas);\r\n\t\t}\r\n\r\n\t\tthis.autoSize = new autosize.AutoSize(this, {\r\n\t\t\tcenter: opts.center,\r\n\t\t\tscale: opts.scale\r\n\t\t});\r\n\t}\r\n\r\n\tresizeTo(width: number, height: number): void {\r\n\t\tif (width === this.width && height === this.height) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsuper.resizeTo(width, height);\r\n\t\tthis.autoSize.update();\r\n\t}\r\n\r\n\trender(): void {\r\n\t\tthis.renderer.update();\r\n\t}\r\n\r\n\tdestruct(): void {\r\n\t\tthis.autoSize.stop();\r\n\t\tthis.autoSize = null;\r\n\t\tthis.renderer.destruct();\r\n\t\tthis.renderer = null;\r\n\t\tthis.canvas = null;\r\n\t}\r\n}\r\n\r\nexport = Stage;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport INumberArray = require('../types/INumberArray');\r\nimport IShader = require('../types/IShader');\r\nimport IRGB = require('../types/IRGB');\r\nimport IRGBA = require('../types/IRGBA');\r\n\r\nimport RGBA = require('./RGBA');\r\nimport Font = require('./Font');\r\nimport Char = require('./Char');\r\n\r\nimport microFont = require('../font/Micro');\r\nimport color = require('./color');\r\n\r\nimport util = require('./util');\r\nimport rand = util.rand;\r\nimport clamp = util.clamp;\r\n\r\nvar alpha = new RGBA(0, 0, 0, 0);\r\nvar black = new RGBA(0, 0, 0);\r\nvar magenta = new RGBA(255, 0, 255);\r\n\r\n// TODO properly implement alpha and non-alpha\r\n\r\n// TODO profile element access\r\n// TODO profile loop order\r\n// TODO profile fast-mode\r\n\r\nclass Bitmap {\r\n\r\n\tpublic width: number;\r\n\tpublic height: number;\r\n\tpublic useAlpha: boolean;\r\n\tpublic channels: number;\r\n\tpublic buffer: ArrayBuffer;\r\n\tpublic data: Uint8ClampedArray;\r\n\r\n\tconstructor(width: number, height: number, useAlpha: boolean = false, buffer: ArrayBuffer = null) {\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.useAlpha = useAlpha;\r\n\t\tthis.channels = (useAlpha ? 4 : 3);\r\n\r\n\t\tif (buffer) {\r\n\t\t\tvar total = (this.width * this.height * this.channels);\r\n\t\t\tif (buffer.byteLength !== total) {\r\n\t\t\t\tthrow new Error('bad raw data dimensions; expected ' + total + ', received ' + buffer.byteLength);\r\n\t\t\t}\r\n\t\t\tthis.buffer = buffer;\r\n\t\t\tthis.data = new Uint8ClampedArray(this.buffer);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._resetData();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _resetData(): void {\r\n\t\t// keep reference to raw buffer for aliasing as Uint8Array\r\n\t\tthis.buffer = new ArrayBuffer(this.width * this.height * this.channels);\r\n\t\t// work on a clamped array for safety\r\n\t\tthis.data = new Uint8ClampedArray(this.buffer);\r\n\t}\r\n\r\n\tresizeTo(width: number, height: number): void {\r\n\t\tif (width === this.width && height === this.height) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis._resetData();\r\n\t}\r\n\r\n\tsetPixel(x: number, y: number, col: IRGB): void {\r\n\t\tx = Math.floor(x);\r\n\t\ty = Math.floor(y);\r\n\r\n\t\tif (x < 0 || y < 0 || x >= this.width || y >= this.height) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar p = (x + y * this.width) * this.channels;\r\n\t\tthis.data[p] = col.r;\r\n\t\tthis.data[p + 1] = col.g;\r\n\t\tthis.data[p + 2] = col.b;\r\n\t}\r\n\r\n\tgetPixel(x: number, y: number, col?: IRGB): IRGB {\r\n\t\tx = Math.floor(x);\r\n\t\ty = Math.floor(y);\r\n\r\n\t\tif (x < 0 || y < 0 || x >= this.width || y >= this.height) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tcol = (col || new RGBA());\r\n\r\n\t\tvar p = (x + y * this.width) * this.channels;\r\n\t\tcol.r = this.data[p];\r\n\t\tcol.g = this.data[p + 1];\r\n\t\tcol.b = this.data[p + 2];\r\n\t\treturn col;\r\n\t}\r\n\r\n\tfillRect(x: number, y: number, w: number, h: number, col: IRGB): void {\r\n\t\tx = Math.floor(x);\r\n\t\ty = Math.floor(y);\r\n\t\tw = Math.floor(w);\r\n\t\th = Math.floor(h);\r\n\r\n\t\tfor (var iy = y; iy < y + h; iy++) {\r\n\t\t\tfor (var ix = x; ix < x + w; ix++) {\r\n\t\t\t\t// TODO move this outside the loop\r\n\t\t\t\tif (ix < 0 || iy < 0 || ix >= this.width || iy >= this.height) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tvar p = (ix + iy * this.width) * this.channels;\r\n\t\t\t\tthis.data[p] = col.r;\r\n\t\t\t\tthis.data[p + 1] = col.g;\r\n\t\t\t\tthis.data[p + 2] = col.b;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdrawLineH(x: number, y: number, size: number, col: IRGB): void {\r\n\t\tvar right = clamp(Math.floor(x + size), 0, this.width);\r\n\t\tx = clamp(Math.floor(x), 0, this.width);\r\n\t\ty = clamp(Math.floor(y), 0, this.height);\r\n\r\n\t\tfor (; x < right; x++) {\r\n\t\t\tvar p = (x + y * this.width) * this.channels;\r\n\t\t\tthis.data[p] = col.r;\r\n\t\t\tthis.data[p + 1] = col.g;\r\n\t\t\tthis.data[p + 2] = col.b;\r\n\t\t}\r\n\t}\r\n\r\n\tdrawLineV(x: number, y: number, size: number, col: IRGB): void {\r\n\t\tvar bottom = clamp(Math.floor(y + size), 0, this.height);\r\n\t\tx = clamp(Math.floor(x), 0, this.width);\r\n\t\ty = clamp(Math.floor(y), 0, this.height);\r\n\r\n\t\tfor (; y < bottom; y++) {\r\n\t\t\tvar p = (x + y * this.width) * this.channels;\r\n\t\t\tthis.data[p] = col.r;\r\n\t\t\tthis.data[p + 1] = col.g;\r\n\t\t\tthis.data[p + 2] = col.b;\r\n\t\t}\r\n\t}\r\n\r\n\tdrawRect(x: number, y: number, width: number, height: number, col: IRGB): void {\r\n\t\tx = Math.floor(x);\r\n\t\ty = Math.floor(y);\r\n\t\twidth = Math.floor(width);\r\n\t\theight = Math.floor(height);\r\n\r\n\t\tthis.drawLineH(x, y, width, col);\r\n\t\tthis.drawLineH(x, y + height - 1, width, col);\r\n\t\tthis.drawLineV(x, y, height, col);\r\n\t\tthis.drawLineV(x + width - 1, y, height, col);\r\n\t}\r\n\r\n\tfillCircle(x: number, y: number, r: number, col: IRGB): void {\r\n\t\tx = Math.floor(x);\r\n\t\ty = Math.floor(y);\r\n\t\tr = Math.floor(r);\r\n\r\n\t\t// TODO optimise fillCircle\r\n\r\n\t\tfor (var iy = -r; iy <= r; iy++) {\r\n\t\t\tfor (var ix = -r; ix <= r; ix++) {\r\n\t\t\t\tif (x + ix < 0 || y + iy < 0 || x + ix >= this.width || y + iy >= this.height) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (ix * ix + iy * iy <= r * r) {\r\n\t\t\t\t\tvar p = (x + ix + (y + iy) * this.width) * this.channels;\r\n\t\t\t\t\tthis.data[p] = col.r;\r\n\t\t\t\t\tthis.data[p + 1] = col.g;\r\n\t\t\t\t\tthis.data[p + 2] = col.b;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdrawCircle(x: number, y: number, r: number, col: IRGB): void {\r\n\t\tx = Math.floor(x);\r\n\t\ty = Math.floor(y);\r\n\t\tr = Math.floor(r);\r\n\r\n\t\t// TODO optimise drawCircle\r\n\r\n\t\tfor (var i = 0; i < 360; i++) {\r\n\t\t\tvar cx = Math.round(Math.cos(i * (Math.PI / 180)) * r) + x;\r\n\t\t\tvar cy = Math.round(Math.sin(i * (Math.PI / 180)) * r) + y;\r\n\r\n\t\t\tif (cx < 0 || cy < 0 || cx >= this.width || cy >= this.height) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar p = (cx + cy * this.width) * this.channels;\r\n\t\t\tthis.data[p] = col.r;\r\n\t\t\tthis.data[p + 1] = col.g;\r\n\t\t\tthis.data[p + 2] = col.b;\r\n\t\t}\r\n\t}\r\n\r\n\tshader(f: IShader): void {\r\n\t\tvar iy: number;\r\n\t\tvar ix: number;\r\n\t\tvar p: number;\r\n\t\tvar col: IRGBA;\r\n\r\n\t\tvar rgb = new RGBA();\r\n\r\n\t\tfor (iy = 0; iy < this.height; iy++) {\r\n\t\t\tfor (ix = 0; ix < this.width; ix++) {\r\n\t\t\t\tp = (ix + iy * this.width) * this.channels;\r\n\t\t\t\trgb.r = this.data[p];\r\n\t\t\t\trgb.g = this.data[p + 1];\r\n\t\t\t\trgb.b = this.data[p + 2];\r\n\r\n\t\t\t\tcol = f(ix, iy, rgb);\r\n\r\n\t\t\t\tthis.data[p] = col.r;\r\n\t\t\t\tthis.data[p + 1] = col.g;\r\n\t\t\t\tthis.data[p + 2] = col.b;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttext(x: number, y: number, txt: string, col: IRGB): void {\r\n\t\ttxt = String(txt);\r\n\r\n\t\tfor (var i = 0; i < txt.length; i++) {\r\n\t\t\tx += this.drawChar(x, y, txt.charAt(i), col) + 1;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate drawChar(x: number, y: number, chr: string, col: IRGB): number {\r\n\t\tvar char: Char = microFont.chars[chr.toUpperCase()];\r\n\t\tif (!char) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tfor (var iy = 0; iy < microFont.height; iy++) {\r\n\t\t\tfor (var ix = 0; ix < char.width; ix++) {\r\n\t\t\t\tif (char.map[iy * char.width + ix]) {\r\n\t\t\t\t\tthis.setPixel(x + ix, y + iy, col);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn char.width;\r\n\t}\r\n\r\n\tblit(sprite: Bitmap, x?: number, y?: number): void {\r\n\t\tx = (x ? Math.floor(x) : 0);\r\n\t\ty = (y ? Math.floor(y) : 0);\r\n\r\n\t\tvar iy: number;\r\n\t\tvar ix: number;\r\n\t\tvar read: number;\r\n\t\tvar write: number;\r\n\r\n\t\tif (x >= this.width || y >= this.height || x + sprite.width < 0 || y + sprite.height < 0) {\r\n\t\t\t// fast bail\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar left = x;\r\n\t\tvar right = x + sprite.width;\r\n\t\tvar top = y;\r\n\t\tvar bottom = y + sprite.height;\r\n\r\n\t\tif (left < 0) {\r\n\t\t\tleft = 0;\r\n\t\t}\r\n\t\tif (top < 0) {\r\n\t\t\ttop = 0;\r\n\t\t}\r\n\r\n\t\tif (right >= this.width) {\r\n\t\t\tright = this.width;\r\n\t\t}\r\n\t\tif (bottom >= this.height) {\r\n\t\t\tbottom = this.height;\r\n\t\t}\r\n\r\n\t\tif (sprite.useAlpha) {\r\n\t\t\tfor (iy = top; iy < bottom; iy++) {\r\n\t\t\t\tfor (ix = left; ix < right; ix++) {\r\n\t\t\t\t\tread = (ix - x + (iy - y) * sprite.width) * sprite.channels;\r\n\t\t\t\t\twrite = (ix + iy * this.width) * this.channels;\r\n\r\n\t\t\t\t\tvar alpha = sprite.data[read + 3] / 255;\r\n\t\t\t\t\tvar inv = 1 - alpha;\r\n\t\t\t\t\tthis.data[write] = Math.round(this.data[write] * inv + sprite.data[read] * alpha);\r\n\t\t\t\t\tthis.data[write + 1] = Math.round(this.data[write + 1] * inv + sprite.data[read + 1] * alpha);\r\n\t\t\t\t\tthis.data[write + 2] = Math.round(this.data[write + 2] * inv + sprite.data[read + 2] * alpha);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tfor (iy = top; iy < bottom; iy++) {\r\n\t\t\t\tfor (ix = left; ix < right; ix++) {\r\n\t\t\t\t\tread = (ix - x + (iy - y) * sprite.width) * sprite.channels;\r\n\t\t\t\t\twrite = (ix + iy * this.width) * this.channels;\r\n\r\n\t\t\t\t\tthis.data[write] = sprite.data[read];\r\n\t\t\t\t\tthis.data[write + 1] = sprite.data[read + 1];\r\n\t\t\t\t\tthis.data[write + 2] = sprite.data[read + 2];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tclear(color?: IRGBA): void {\r\n\t\tcolor = color || black;\r\n\r\n\t\tvar lim: number;\r\n\t\tvar i: number;\r\n\r\n\t\tif (this.useAlpha) {\r\n\t\t\tlim = this.width * this.height * 4;\r\n\t\t\tfor (i = 0; i < lim; i += 4) {\r\n\t\t\t\tthis.data[i] = color.r;\r\n\t\t\t\tthis.data[i + 1] = color.g;\r\n\t\t\t\tthis.data[i + 2] = color.b;\r\n\t\t\t\tthis.data[i + 3] = color.a;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlim = this.width * this.height * 3;\r\n\t\t\tfor (i = 0; i < lim; i += 3) {\r\n\t\t\t\tthis.data[i] = color.r;\r\n\t\t\t\tthis.data[i + 1] = color.g;\r\n\t\t\t\tthis.data[i + 2] = color.b;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tclearAlpha(alpha: number = 0): void {\r\n\t\tif (!this.useAlpha) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar lim: number = this.width * this.height * 4;\r\n\t\tfor (var i = 3; i < lim; i += 4) {\r\n\t\t\tthis.data[i] = alpha;\r\n\t\t}\r\n\t}\r\n\r\n\t/* tslint:disable: max-line-length */\r\n\tstatic clipFromData(inputData: INumberArray, inputWidth: number, inputHeight: number, inputChannels: number, x: number, y: number, width: number, height: number, useAlpha: boolean): Bitmap {\r\n\r\n\t\tvar channels = useAlpha ? 4 : 3;\r\n\t\tvar data = new Uint8Array(height * width * channels);\r\n\r\n\t\tvar iy: number;\r\n\t\tvar ix: number;\r\n\t\tvar read: number;\r\n\t\tvar write: number;\r\n\r\n\t\tif (useAlpha) {\r\n\t\t\tfor (iy = 0; iy < height; iy++) {\r\n\t\t\t\tfor (ix = 0; ix < width; ix++) {\r\n\t\t\t\t\tread = (ix + x + (iy + y) * inputWidth) * inputChannels;\r\n\t\t\t\t\twrite = (ix + iy * width) * channels;\r\n\r\n\t\t\t\t\tdata[write] = inputData[read];\r\n\t\t\t\t\tdata[write + 1] = inputData[read + 1];\r\n\t\t\t\t\tdata[write + 2] = inputData[read + 2];\r\n\t\t\t\t\tdata[write + 3] = inputData[read + 3];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tfor (iy = 0; iy < height; iy++) {\r\n\t\t\t\tfor (ix = 0; ix < width; ix++) {\r\n\t\t\t\t\tread = (ix + x + (iy + y) * inputWidth) * inputChannels;\r\n\t\t\t\t\twrite = (ix + iy * width) * channels;\r\n\r\n\t\t\t\t\tdata[write] = inputData[read];\r\n\t\t\t\t\tdata[write + 1] = inputData[read + 1];\r\n\t\t\t\t\tdata[write + 2] = inputData[read + 2];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn new Bitmap(width, height, useAlpha, data);\r\n\t}\r\n}\r\n\r\nexport = Bitmap;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nclass FPS {\r\n\tprivate previous: number;\r\n\tprivate smoothFPS: number;\r\n\tprivate smoothDelta: number;\r\n\tprivate tickHistory: number[] = [0];\r\n\tprivate deltaHistory: number[] = [0];\r\n\tprivate tickI: number = 0;\r\n\tprivate deltaI: number = 0;\r\n\r\n\tconstructor(smoothFPS: number = 30, smoothDelta: number = 2) {\r\n\t\tthis.smoothFPS = smoothFPS;\r\n\t\tthis.smoothDelta = smoothDelta;\r\n\t\tthis.previous = performance.now();\r\n\t}\r\n\r\n\tbegin(): void {\r\n\t\tvar now = performance.now();\r\n\t\tvar delta = now - this.previous;\r\n\t\tthis.tickHistory[this.tickI % this.smoothFPS] = delta;\r\n\t\tthis.tickI++;\r\n\t\tthis.previous = now;\r\n\t}\r\n\r\n\tend(): void {\r\n\t\tvar now = performance.now();\r\n\t\tvar delta = now - this.previous;\r\n\t\tthis.deltaHistory[this.deltaI % this.smoothDelta] = delta;\r\n\t\tthis.deltaI++;\r\n\t}\r\n\r\n\t/* tslint:disable: no-duplicate-variable */\r\n\tget fps(): number {\r\n\t\tvar tot = 0;\r\n\t\tfor (var i = 0; i < this.tickHistory.length; i++) {\r\n\t\t\ttot += this.tickHistory[i];\r\n\t\t}\r\n\t\treturn Math.ceil(1000 / (tot / this.tickHistory.length));\r\n\t}\r\n\r\n\tget redraw(): number {\r\n\t\tvar tot = 0;\r\n\t\tfor (var i = 0; i < this.deltaHistory.length; i++) {\r\n\t\t\ttot += this.deltaHistory[i];\r\n\t\t}\r\n\t\treturn Math.ceil(tot / this.deltaHistory.length);\r\n\t}\r\n\r\n\t/* tslint:enable: no-duplicate-variable */\r\n}\r\n\r\nexport = FPS;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport IRGBA = require('../types/IRGBA');\r\n\r\nclass RGBA implements IRGBA {\r\n\tpublic r: number;\r\n\tpublic g: number;\r\n\tpublic b: number;\r\n\tpublic a: number;\r\n\r\n\tconstructor(r: number = 0, g: number = 0, b: number = 0, a: number = 255) {\r\n\t\tthis.r = r;\r\n\t\tthis.g = g;\r\n\t\tthis.b = b;\r\n\t\tthis.a = a;\r\n\t}\r\n}\r\n\r\nexport = RGBA;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport IHSV = require('../types/IHSV');\r\n\r\nclass HSV implements IHSV {\r\n\tpublic h: number;\r\n\tpublic s: number;\r\n\tpublic v: number;\r\n\r\n\tconstructor(h: number = 0, s: number = 0, v: number = 0) {\r\n\t\tthis.h = h;\r\n\t\tthis.s = s;\r\n\t\tthis.v = v;\r\n\t}\r\n}\r\n\r\nexport  = HSV;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nexport function rand(max: number): number {\r\n\treturn Math.floor(Math.random() * max);\r\n}\r\n\r\nexport function clamp(value: number, min: number, max: number) {\r\n\tif (value < min) {\r\n\t\treturn min;\r\n\t}\r\n\tif (value > max) {\r\n\t\treturn max;\r\n\t}\r\n\treturn value;\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport IRGB = require('../types/IRGB');\r\nimport IRGBA = require('../types/IRGBA');\r\nimport IHSV = require('../types/IHSV');\r\nimport RGBA = require('./RGBA');\r\nimport HSV = require('./HSV');\r\n\r\n/**\r\n * HSV to RGB color conversion\r\n *\r\n * H runs from 0 to 360 degrees\r\n * S and V run from 0 to 100\r\n *\r\n * Ported from the excellent java algorithm by Eugene Vishnevsky at\r\n * http://www.cs.rit.edu/~ncs/color/t_convert.html\r\n *\r\n * This, in turn, was taken from the snippet at\r\n * http://snipplr.com/view/14590/hsv-to-rgb/\r\n */\r\nexport function hsv2rgb(hsv: IHSV): IRGBA {\r\n\tvar r, g, b;\r\n\tvar i;\r\n\tvar f, p, q, t;\r\n\tvar h = hsv.h;\r\n\tvar s = hsv.s;\r\n\tvar v = hsv.v;\r\n\r\n\t// Make sure our arguments stay in-range\r\n\th = Math.max(0, Math.min(360, h));\r\n\ts = Math.max(0, Math.min(100, s));\r\n\tv = Math.max(0, Math.min(100, v));\r\n\r\n\t// We accept saturation and value arguments from 0 to 100 because that's\r\n\t// how Photoshop represents those values. Internally, however, the\r\n\t// saturation and value are calculated from a range of 0 to 1. We make\r\n\t// That conversion here.\r\n\ts /= 100;\r\n\tv /= 100;\r\n\r\n\tif (s === 0) {\r\n\t\t// Achromatic (grey)\r\n\t\tr = g = b = v;\r\n\t\treturn new RGBA(Math.round(r * 255), Math.round(g * 255), Math.round(b * 255));\r\n\t}\r\n\r\n\th /= 60; // sector 0 to 5\r\n\ti = Math.floor(h);\r\n\tf = h - i; // factorial part of h\r\n\tp = v * (1 - s);\r\n\tq = v * (1 - s * f);\r\n\tt = v * (1 - s * (1 - f));\r\n\r\n\tswitch (i) {\r\n\t\tcase 0:\r\n\t\t\tr = v;\r\n\t\t\tg = t;\r\n\t\t\tb = p;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 1:\r\n\t\t\tr = q;\r\n\t\t\tg = v;\r\n\t\t\tb = p;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 2:\r\n\t\t\tr = p;\r\n\t\t\tg = v;\r\n\t\t\tb = t;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 3:\r\n\t\t\tr = p;\r\n\t\t\tg = q;\r\n\t\t\tb = v;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 4:\r\n\t\t\tr = t;\r\n\t\t\tg = p;\r\n\t\t\tb = v;\r\n\t\t\tbreak;\r\n\r\n\t\tdefault: // case 5:\r\n\t\t\tr = v;\r\n\t\t\tg = p;\r\n\t\t\tb = q;\r\n\t}\r\n\r\n\treturn new RGBA(\r\n\t\tMath.round(r * 255),\r\n\t\tMath.round(g * 255),\r\n\t\tMath.round(b * 255)\r\n\t);\r\n}\r\n\r\n/**\r\n * RGB to HSV color conversion\r\n *\r\n * Gratefully lifted from Mic's code on StackOverflow:\r\n * http://stackoverflow.com/questions/8022885/rgb-to-hsv-color-in-javascript#8023734\r\n */\r\nexport function rgb2hsv(rgb: IRGB): IHSV {\r\n\tvar rr, gg, bb,\r\n\t\tr = rgb.r / 255,\r\n\t\tg = rgb.g / 255,\r\n\t\tb = rgb.b / 255,\r\n\t\th, s,\r\n\t\tv = Math.max(r, g, b),\r\n\t\tdiff = v - Math.min(r, g, b),\r\n\t\tdiffc = function (c) {\r\n\t\t\treturn (v - c) / 6 / diff + 1 / 2;\r\n\t\t};\r\n\r\n\tif (diff === 0) {\r\n\t\th = s = 0;\r\n\t}\r\n\telse {\r\n\t\ts = diff / v;\r\n\t\trr = diffc(r);\r\n\t\tgg = diffc(g);\r\n\t\tbb = diffc(b);\r\n\r\n\t\tif (r === v) {\r\n\t\t\th = bb - gg;\r\n\t\t} else if (g === v) {\r\n\t\t\th = (1 / 3) + rr - bb;\r\n\t\t} else if (b === v) {\r\n\t\t\th = (2 / 3) + gg - rr;\r\n\t\t}\r\n\t\tif (h < 0) {\r\n\t\t\th += 1;\r\n\t\t} else if (h > 1) {\r\n\t\t\th -= 1;\r\n\t\t}\r\n\t}\r\n\treturn new HSV(\r\n\t\tMath.round(h * 360),\r\n\t\tMath.round(s * 100),\r\n\t\tMath.round(v * 100)\r\n\t);\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\n// TODO add functionality to pass frame-number and high-precision performance.now()\r\nimport ITicker = require('./../types/ITicker');\r\n\r\nexport interface FrameHandler {\r\n\t(frame: number, delta: number): void\r\n}\r\n\r\n// simple setInterval ticker\r\nexport function interval(callback: FrameHandler, fps: number): ITicker {\r\n\tvar intervalID = 0;\r\n\tvar frame = 0;\r\n\tvar prev = performance.now();\r\n\r\n\tfunction step() {\r\n\t\tif (intervalID) {\r\n\t\t\tframe++;\r\n\t\t\tvar now = performance.now();\r\n\t\t\tcallback(frame, now - prev);\r\n\t\t\tprev = now;\r\n\t\t}\r\n\t}\r\n\r\n\tvar that: ITicker = <ITicker>{};\r\n\tthat.start = function () {\r\n\t\tif (intervalID) {\r\n\t\t\tclearInterval(intervalID);\r\n\t\t}\r\n\t\tintervalID = setInterval(step, 1000 / fps);\r\n\t};\r\n\tthat.step = function () {\r\n\t\tstep();\r\n\t};\r\n\tthat.stop = function () {\r\n\t\tif (intervalID) {\r\n\t\t\tclearInterval(intervalID);\r\n\t\t\tintervalID = 0;\r\n\t\t}\r\n\t};\r\n\tthat.isRunning = function () {\r\n\t\treturn !!intervalID;\r\n\t};\r\n\treturn that;\r\n}\r\n\r\n// simple requestAnimationFrame ticker\r\nexport function request(callback: FrameHandler): ITicker {\r\n\tvar running = false;\r\n\tvar frame = 0;\r\n\tvar prev = performance.now();\r\n\r\n\tfunction step() {\r\n\t\tif (running) {\r\n\t\t\tframe++;\r\n\t\t\tvar now = performance.now();\r\n\t\t\tcallback(frame, now - prev);\r\n\t\t\tprev = now;\r\n\t\t\trequestAnimationFrame(step);\r\n\t\t}\r\n\t}\r\n\r\n\tvar requestID: number;\r\n\tvar that: ITicker = <ITicker>{};\r\n\tthat.start = function () {\r\n\t\tif (!running) {\r\n\t\t\trunning = true;\r\n\t\t\trequestID = requestAnimationFrame(step);\r\n\t\t}\r\n\t};\r\n\tthat.step = function () {\r\n\t\tstep();\r\n\t};\r\n\tthat.stop = function () {\r\n\t\tif (running) {\r\n\t\t\trunning = false;\r\n\t\t\tcancelAnimationFrame(requestID);\r\n\t\t}\r\n\t};\r\n\tthat.isRunning = function () {\r\n\t\treturn running;\r\n\t};\r\n\treturn that;\r\n}\r\n","// This is a port of Ken Perlin's Java code. The\r\n// original Java code is at http://cs.nyu.edu/%7Eperlin/noise/.\r\n// Note that in this version, a number from 0 to 1 is returned.\r\n\r\n// copy-paste-salvaged via http://asserttrue.blogspot.fi/2011/12/perlin-noise-in-javascript_31.html\r\n\r\n/* tslint:disable */\r\n\r\nclass PerlinNoise {\r\n\r\n\tprivate p: number[];\r\n\tprivate permutation: number[];\r\n\r\n\tconstructor() {\r\n\t\t// To remove the need for index wrapping, double the permutation table length\r\n\t\tthis.permutation = [ 151, 160, 137, 91, 90, 15,\r\n\t\t\t131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23,\r\n\t\t\t190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33,\r\n\t\t\t88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166,\r\n\t\t\t77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244,\r\n\t\t\t102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196,\r\n\t\t\t135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123,\r\n\t\t\t5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42,\r\n\t\t\t223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9,\r\n\t\t\t129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228,\r\n\t\t\t251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107,\r\n\t\t\t49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254,\r\n\t\t\t138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180\r\n\t\t];\r\n\t\tthis.p = new Array(512);\r\n\r\n\t\tfor (var i = 0; i < 256; i++) {\r\n\t\t\tthis.p[256 + i] = this.p[i] = this.permutation[i];\r\n\t\t}\r\n\t}\r\n\r\n\tnoise(x: number, y: number, z: number): number {\r\n\t\tvar X = Math.floor(x) & 255;     // FIND UNIT CUBE THAT\r\n\t\tvar Y = Math.floor(y) & 255;     // CONTAINS POINT.\r\n\t\tvar Z = Math.floor(z) & 255;\r\n\r\n\t\tx -= Math.floor(x);              // FIND RELATIVE X,Y,Z\r\n\t\ty -= Math.floor(y);              // OF POINT IN CUBE.\r\n\t\tz -= Math.floor(z);\r\n\r\n\t\tvar u = this.fade(x);            // COMPUTE FADE CURVES\r\n\t\tvar v = this.fade(y);            // FOR EACH OF X,Y,Z.\r\n\t\tvar w = this.fade(z);\r\n\r\n\t\tvar A = this.p[X] + Y;\r\n\t\tvar AA = this.p[A] + Z;\r\n\t\tvar AB = this.p[A + 1] + Z;      // HASH COORDINATES OF\r\n\r\n\t\tvar B = this.p[X + 1] + Y;\r\n\t\tvar BA = this.p[B] + Z;\r\n\t\tvar BB = this.p[B + 1] + Z;      // THE 8 CUBE CORNERS,\r\n\r\n\t\t// @bartvs: wtf.. but at least it works\r\n\t\treturn this.scale(this.lerp(w, this.lerp(v, this.lerp(u, this.grad(this.p[AA  ], x, y, z),  // AND ADD\r\n\t\t\t\t\tthis.grad(this.p[BA], x - 1, y, z)), // BLENDED\r\n\t\t\t\tthis.lerp(u, this.grad(this.p[AB], x, y - 1, z),  // RESULTS\r\n\t\t\t\t\tthis.grad(this.p[BB], x - 1, y - 1, z))),// FROM  8\r\n\t\t\tthis.lerp(v, this.lerp(u, this.grad(this.p[AA + 1], x, y, z - 1),  // CORNERS\r\n\t\t\t\t\tthis.grad(this.p[BA + 1], x - 1, y, z - 1)), // OF CUBE\r\n\t\t\t\tthis.lerp(u, this.grad(this.p[AB + 1], x, y - 1, z - 1),\r\n\t\t\t\t\tthis.grad(this.p[BB + 1], x - 1, y - 1, z - 1)))));\r\n\t}\r\n\r\n\tfade(t: number): number {\r\n\t\treturn t * t * t * (t * (t * 6 - 15) + 10);\r\n\t}\r\n\r\n\tlerp(t: number, a: number, b: number): number {\r\n\t\treturn a + t * (b - a);\r\n\t}\r\n\r\n\tgrad(hash: number, x: number, y: number, z: number): number {\r\n\t\tvar h = hash & 15;      // CONVERT LO 4 BITS OF HASH CODE\r\n\t\tvar u = h < 8 ? x : y;  // INTO 12 GRADIENT DIRECTIONS.\r\n\t\tvar v = h < 4 ? y : h == 12 || h == 14 ? x : z;\r\n\t\treturn ((h & 1) == 0 ? u : -u) + ((h & 2) == 0 ? v : -v);\r\n\t}\r\n\r\n\tscale(n: number): number {\r\n\t\treturn (1 + n) / 2;\r\n\t}\r\n}\r\n\r\nexport = PerlinNoise;\r\n","export import ImageDataLoader = require('./ImageDataLoader');\r\nexport import BitmapLoader = require('./BitmapLoader');\r\nexport import TextLoader = require('./TextLoader');\r\nexport import JSONLoader = require('./JSONLoader');\r\nexport import SpriteSheetLoader = require('./SpriteSheetLoader');\r\nexport import SpriteSheetJSONLoader = require('./SpriteSheetJSONLoader');\r\nexport import MultiLoader = require('./MultiLoader');\r\n\r\n// bugs\r\n[\r\n\tMultiLoader,\r\n\tImageDataLoader,\r\n\tBitmapLoader,\r\n\tTextLoader,\r\n\tJSONLoader,\r\n\tSpriteSheetLoader,\r\n\tSpriteSheetJSONLoader\r\n];\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Stage = require('./Stage');\r\nimport browser = require('./browser');\r\n\r\nimport IAutoSize = require('./../types/IAutoSize');\r\nimport IBlock = require('./../types/IBlock');\r\n\r\nfunction assertMode(scaleMode: any): void {\r\n\tif ((typeof scaleMode === 'number' && scaleMode > 0)\r\n\t\t|| scaleMode === 'max'\r\n\t\t|| scaleMode === 'fit'\r\n\t\t|| scaleMode === 'none') {\r\n\t\treturn;\r\n\t}\r\n\tvar int = parseInt(scaleMode, 10);\r\n\tif (!isNaN(int) && int > 0) {\r\n\t\treturn;\r\n\t}\r\n\tthrow new Error('bad scaleMode: ' + scaleMode);\r\n}\r\n\r\nexport interface IAutoSizeOpts {\r\n\tcenter?: boolean;\r\n\tscale?: any;\r\n}\r\n\r\nexport class AutoSize implements IAutoSize {\r\n\r\n\tprivate stage: Stage;\r\n\tprivate scaleMode: any;\r\n\tprivate centerView: boolean;\r\n\tpublic update: (event?: any) => void;\r\n\r\n\tconstructor(stage: Stage, opts: IAutoSizeOpts) {\r\n\t\tthis.stage = stage;\r\n\r\n\t\topts = opts || {};\r\n\t\tthis.centerView = !!opts.center;\r\n\t\tthis.scaleMode = opts.scale || 'none';\r\n\t\tassertMode(this.scaleMode);\r\n\r\n\t\tstage.canvas.style.position = 'absolute';\r\n\r\n\t\tthis.update = (event?: any) => {\r\n\t\t\tvar viewPort = browser.getViewport();\r\n\t\t\tif (this.scaleMode === 'fit') {\r\n\t\t\t\tthis.scaleFit(viewPort);\r\n\t\t\t}\r\n\t\t\telse if (this.scaleMode === 'max') {\r\n\t\t\t\tthis.scaleAspect(viewPort);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.stage.renderer.resize();\r\n\t\t\t}\r\n\r\n\t\t\tif (this.centerView || this.scaleMode === 'max') {\r\n\t\t\t\tthis.moveScreenCenter(viewPort);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.moveScreenTo(0, 0);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.setMode(this.scaleMode, this.centerView);\r\n\t}\r\n\r\n\t// factory result\r\n\tscale(mode: any): void {\r\n\t\tthis.setMode(mode, this.centerView);\r\n\t}\r\n\r\n\tcenter(center: boolean = true): void {\r\n\t\tthis.setMode(this.scaleMode, center);\r\n\t}\r\n\r\n\tresize(): void {\r\n\t\tthis.update();\r\n\t}\r\n\r\n\tstop() {\r\n\t\tthis.unlisten();\r\n\t}\r\n\r\n\tprivate scaleTo(width: number, height: number): void {\r\n\t\tthis.scaleMode = 'none';\r\n\t\tthis.stage.canvas.width = width;\r\n\t\tthis.stage.canvas.height = height;\r\n\t\tthis.stage.renderer.resize();\r\n\t}\r\n\r\n\tprivate scaleFit(viewPort: IBlock): void {\r\n\t\tthis.stage.canvas.width = viewPort.width;\r\n\t\tthis.stage.canvas.height = viewPort.height;\r\n\t\tthis.stage.renderer.resize();\r\n\t}\r\n\r\n\tprivate scaleAspect(viewPort: IBlock): void {\r\n\t\tvar ratio = Math.min(viewPort.width / this.stage.width, viewPort.height / this.stage.height);\r\n\t\tthis.stage.canvas.width = Math.floor(this.stage.width * ratio);\r\n\t\tthis.stage.canvas.height = Math.floor(this.stage.height * ratio);\r\n\t\tthis.stage.renderer.resize();\r\n\t}\r\n\r\n\tprivate moveScreenTo(x: number, y: number): void {\r\n\t\tthis.stage.canvas.style.left = x + 'px';\r\n\t\tthis.stage.canvas.style.top = y + 'px';\r\n\t}\r\n\r\n\tprivate moveScreenCenter(viewPort: IBlock): void {\r\n\t\tthis.moveScreenTo(Math.floor((viewPort.width - this.stage.canvas.width) / 2),\r\n\t\t\tMath.floor((viewPort.height - this.stage.canvas.height) / 2));\r\n\t}\r\n\r\n\tprivate listen(): void {\r\n\t\tthis.unlisten();\r\n\t\tif (this.centerView || this.scaleMode === 'fit') {\r\n\t\t\twindow.addEventListener('resize', this.update);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate unlisten(): void {\r\n\t\twindow.removeEventListener('resize', this.update);\r\n\t}\r\n\r\n\tprivate setMode(mode: any, center: boolean): void {\r\n\t\tassertMode(mode);\r\n\r\n\t\tthis.scaleMode = mode;\r\n\r\n\t\tvar multi = parseInt(this.scaleMode, 10);\r\n\t\tif (!isNaN(multi)) {\r\n\t\t\tthis.scaleMode = multi;\r\n\t\t\tthis.scaleTo(Math.floor(this.stage.width * multi), Math.floor(this.stage.height * multi));\r\n\t\t\tthis.unlisten();\r\n\t\t}\r\n\t\tif (this.scaleMode === 'fit') {\r\n\t\t\tthis.moveScreenTo(0, 0);\r\n\t\t}\r\n\t\tif (center || this.scaleMode === 'fit' || this.scaleMode === 'max') {\r\n\t\t\tthis.listen();\r\n\t\t}\r\n\t\tthis.update();\r\n\t}\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Bitmap = require('../core/Bitmap');\r\n\r\nimport IRenderer = require('../render/IRenderer');\r\n\r\nfunction clearAlpha(data: Uint8Array) {\r\n\tvar lim = data.length;\r\n\tfor (var i = 3; i < lim; i++) {\r\n\t\tdata[i] = 255;\r\n\t}\r\n}\r\n\r\n// basic renderer with nearest-neighbour\r\nclass CanvasRender implements IRenderer {\r\n\r\n\tprivate canvas: HTMLCanvasElement;\r\n\tprivate width: number;\r\n\tprivate height: number;\r\n\tprivate channels: number;\r\n\tprivate px: Uint8ClampedArray;\r\n\tprivate ctx: CanvasRenderingContext2D;\r\n\tprivate output: ImageData;\r\n\r\n\tconstructor(bitmap: Bitmap, canvas: HTMLCanvasElement) {\r\n\t\tthis.canvas = canvas;\r\n\r\n\t\tthis.px = bitmap.data;\r\n\t\tthis.width = bitmap.width;\r\n\t\tthis.height = bitmap.height;\r\n\t\tthis.channels = bitmap.useAlpha ? 4 : 3;\r\n\r\n\t\tthis.ctx = this.canvas.getContext('2d');\r\n\r\n\t\t// get canvas-sized image data\r\n\t\tthis.output = this.ctx.createImageData(this.canvas.width, this.canvas.height);\r\n\r\n\t\t// set the alpha channel to visible\r\n\t\tclearAlpha(this.output.data);\r\n\r\n\t\tthis.ctx.putImageData(this.output, 0, 0);\r\n\t}\r\n\r\n\tresize(): void {\r\n\t\tif (this.output.width !== this.canvas.width || this.output.height !== this.canvas.height) {\r\n\t\t\tthis.output = this.ctx.createImageData(this.canvas.width, this.canvas.height);\r\n\t\t\t// set the alpha channel to visible\r\n\t\t\tclearAlpha(this.output.data);\r\n\t\t}\r\n\t}\r\n\r\n\tupdate(): void {\r\n\t\tvar data = this.output.data;\r\n\t\tvar width = this.output.width;\r\n\t\tvar height = this.output.height;\r\n\r\n\t\tvar fx = this.width / width;\r\n\t\tvar fy = this.height / height;\r\n\r\n\t\tfor (var iy = 0; iy < height; iy++) {\r\n\t\t\tfor (var ix = 0; ix < width; ix++) {\r\n\t\t\t\tvar x = Math.floor(ix * fx);\r\n\t\t\t\tvar y = Math.floor(iy * fy);\r\n\t\t\t\tvar read = (x + y * this.width) * this.channels;\r\n\t\t\t\tvar write = (ix + iy * width) * 4;\r\n\r\n\t\t\t\tdata[write] = this.px[read];\r\n\t\t\t\tdata[write + 1] = this.px[read + 1];\r\n\t\t\t\tdata[write + 2] = this.px[read + 2];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.ctx.putImageData(this.output, 0, 0);\r\n\t}\r\n\r\n\tdestruct(): void {\r\n\t\tthis.px = null;\r\n\t\tthis.ctx = null;\r\n\t\tthis.canvas = null;\r\n\t\tthis.output = null;\r\n\t}\r\n}\r\n\r\nexport = CanvasRender;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Bitmap = require('../core/Bitmap');\r\nimport IRenderer = require('../render/IRenderer');\r\n\r\nvar vertexShaderSource = [\r\n\t// refer the vertices and texture coordinates\r\n\t'attribute vec2 a_position;',\r\n\t'attribute vec2 a_texCoord;',\r\n\r\n\t// passed to fragment shader\r\n\t'varying vec2 v_texCoord;',\r\n\r\n\t'void main() {',\r\n\t// simple transform\r\n\t'    gl_Position = vec4(a_position, 0, 1);',\r\n\t// interpolated value\r\n\t'    v_texCoord = a_texCoord;',\r\n\t'}'\r\n].join('\\n');\r\n\r\nvar fragmentShaderSource = [\r\n\t// config something (cargo-cult from tutorial)\r\n\t'precision mediump float;',\r\n\r\n\t// texture sampler (number 0)\r\n\t'uniform sampler2D u_image;',\r\n\r\n\t// interpolated value from vertex shader\r\n\t'varying vec2 v_texCoord;',\r\n\r\n\t'void main() {',\r\n\t// sample texture on the interpolated value; nearest-neighbour etc was configured earlier\r\n\t'    gl_FragColor = texture2D(u_image, v_texCoord);',\r\n\t'}'\r\n].join('\\n');\r\n\r\nfunction loadShader(gl, shaderSource, shaderType) {\r\n\tvar shader = gl.createShader(shaderType);\r\n\tgl.shaderSource(shader, shaderSource);\r\n\tgl.compileShader(shader);\r\n\r\n\t// check if it worked (cargo-cult from tutorial)\r\n\tvar compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n\tif (!compiled) {\r\n\t\tthrow new Error('error compiling shader \"' + shader + '\":' + gl.getShaderInfoLog(shader));\r\n\t}\r\n\treturn shader;\r\n}\r\n\r\nclass WebGLRender implements IRenderer {\r\n\r\n\tprivate canvas: HTMLCanvasElement;\r\n\tprivate width: number;\r\n\tprivate height: number;\r\n\tprivate px: Uint8Array;\r\n\r\n\tprivate gl: WebGLRenderingContext;\r\n\tprivate positionLocation: number;\r\n\tprivate texCoordLocation: number;\r\n\tprivate positionBuffer: WebGLBuffer;\r\n\tprivate texCoordBuffer: WebGLBuffer;\r\n\tprivate texture: WebGLTexture;\r\n\r\n\tconstructor(bitmap: Bitmap, canvas: HTMLCanvasElement) {\r\n\t\tthis.canvas = canvas;\r\n\t\tthis.width = bitmap.width;\r\n\t\tthis.height = bitmap.height;\r\n\r\n\t\t// use a Uint8Array view for WebGL compatibility\r\n\t\tthis.px = new Uint8Array(bitmap.buffer);\r\n\r\n\t\t// cheap check\r\n\t\tif (!window.WebGLRenderingContext) {\r\n\t\t\tthrow new Error('browser does not support WegGL');\r\n\t\t}\r\n\r\n\t\t// let's not bother with alpha on main canvas\r\n\t\tvar glOpts = {alpha: false};\r\n\r\n\t\t/* tslint:disable:no-duplicate-variable */\r\n\r\n\t\t// lazy alias to local var to keep code clear, also do fancy context lookup\r\n\t\tvar gl = this.gl = this.canvas.getContext('webgl', glOpts) || this.canvas.getContext('experimental-webgl', glOpts);\r\n\t\tif (!gl) {\r\n\t\t\tthrow new Error('could not create WebGL context');\r\n\t\t}\r\n\r\n\t\t/* tslint:enable:no-duplicate-variable */\r\n\r\n\t\t// setup a GLSL program\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\t// add shaders\r\n\t\tgl.attachShader(program, loadShader(gl, vertexShaderSource, gl.VERTEX_SHADER));\r\n\t\tgl.attachShader(program, loadShader(gl, fragmentShaderSource, gl.FRAGMENT_SHADER));\r\n\t\tgl.linkProgram(program);\r\n\r\n\t\t// check the link status (cargo-cult from tutorial)\r\n\t\tvar linked = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n\t\tif (!linked) {\r\n\t\t\t// something went wrong with the link\r\n\t\t\tthrow new Error(('error in program linking:' + gl.getProgramInfoLog(program)));\r\n\t\t}\r\n\t\tgl.useProgram(program);\r\n\r\n\t\t// shader variables that refer to the vertices and texture coordinates\r\n\t\tthis.positionLocation = gl.getAttribLocation(program, 'a_position');\r\n\t\tthis.texCoordLocation = gl.getAttribLocation(program, 'a_texCoord');\r\n\r\n\t\t// setup vertices\r\n\t\tthis.positionBuffer = gl.createBuffer();\r\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\r\n\r\n\t\tgl.enableVertexAttribArray(this.positionLocation);\r\n\t\tgl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, 0, 0);\r\n\r\n\t\t// upload vertices for 2 triangles in 2D: 3 x 2 x 2 elements\r\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\r\n\t\t\t-1.0, -1.0,\r\n\t\t\t1.0, -1.0,\r\n\t\t\t-1.0, 1.0,\r\n\t\t\t-1.0, 1.0,\r\n\t\t\t1.0, -1.0,\r\n\t\t\t1.0, 1.0\r\n\t\t]), gl.STATIC_DRAW);\r\n\r\n\t\t// setup texture coordinates\r\n\t\tthis.texCoordBuffer = gl.createBuffer();\r\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.texCoordBuffer);\r\n\r\n\t\tgl.enableVertexAttribArray(this.texCoordLocation);\r\n\t\tgl.vertexAttribPointer(this.texCoordLocation, 2, gl.FLOAT, false, 0, 0);\r\n\r\n\t\t// upload texture coordinates matching the vertices\r\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\r\n\t\t\t0.0, 1.0,\r\n\t\t\t1.0, 1.0,\r\n\t\t\t0.0, 0.0,\r\n\t\t\t0.0, 0.0,\r\n\t\t\t1.0, 1.0,\r\n\t\t\t1.0, 0.0\r\n\t\t]), gl.STATIC_DRAW);\r\n\r\n\t\t// create a texture\r\n\t\tthis.texture = gl.createTexture();\r\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.texture);\r\n\r\n\t\t// set the parameters so we can render any size image\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n\r\n\t\t// clear the back buffer (with alpha)\r\n\t\tgl.clearColor(0, 0, 0, 1);\r\n\t\tgl.clear(gl.COLOR_BUFFER_BIT);\r\n\r\n\t\t// turn off rendering to alpha\r\n\t\tgl.colorMask(true, true, true, false);\r\n\r\n\t\t// apply size\r\n\t\tgl.viewport(0, 0, this.canvas.width, this.canvas.height);\r\n\t}\r\n\r\n\tresize(): void {\r\n\t\tthis.gl.viewport(0, 0, this.canvas.width, this.canvas.height);\r\n\t\tthis.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n\t}\r\n\r\n\tupdate(): void {\r\n\t\t// upload the pixels to the texture.\r\n\t\tthis.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGB, this.width, this.height, 0, this.gl.RGB, this.gl.UNSIGNED_BYTE, this.px);\r\n\t\t// render state\r\n\t\tthis.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\r\n\t}\r\n\r\n\tdestruct(): void {\r\n\t\tthis.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n\t\t// TODO what else? how unload WebGL?\r\n\t\tthis.gl = null;\r\n\t\tthis.px = null;\r\n\t\tthis.canvas = null;\r\n\t}\r\n}\r\n\r\nexport = WebGLRender;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Font = require('../core/Font');\r\n/**\r\n * Based off of a Gist of a 4x4 font by Martin Holzhauer:\r\n * https://gist.github.com/woodworker/7696835\r\n *\r\n * Features fairly significant modifications to fit characters into smaller horizontal space by @noffle\r\n *\r\n * Expanded with numerals and special characters by @bartvds\r\n */\r\n\r\nvar font = new Font('micro', 4, {\r\n\t'0': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'111'\r\n\t],\r\n\t'1': [\r\n\t\t'01',\r\n\t\t'11',\r\n\t\t'01',\r\n\t\t'01'\r\n\t],\r\n\t'2': [\r\n\t\t'110',\r\n\t\t'001',\r\n\t\t'010',\r\n\t\t'111'\r\n\t],\r\n\t'3': [\r\n\t\t'111',\r\n\t\t'011',\r\n\t\t'001',\r\n\t\t'111'\r\n\t],\r\n\t'4': [\r\n\t\t'100',\r\n\t\t'101',\r\n\t\t'111',\r\n\t\t'010'\r\n\t],\r\n\t'5': [\r\n\t\t'111',\r\n\t\t'100',\r\n\t\t'111',\r\n\t\t'011'\r\n\t],\r\n\t'6': [\r\n\t\t'100',\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'111'\r\n\t],\r\n\t'7': [\r\n\t\t'111',\r\n\t\t'001',\r\n\t\t'010',\r\n\t\t'010'\r\n\t],\r\n\t'8': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'111',\r\n\t\t'111'\r\n\t],\r\n\t'9': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'111',\r\n\t\t'001'\r\n\t],\r\n\t'A': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'111',\r\n\t\t'101'\r\n\t],\r\n\t'B': [\r\n\t\t'100',\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'111'\r\n\t],\r\n\t'C': [\r\n\t\t'111',\r\n\t\t'100',\r\n\t\t'100',\r\n\t\t'111'\r\n\t],\r\n\t'D': [\r\n\t\t'110',\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'110'\r\n\t],\r\n\t'E': [\r\n\t\t'111',\r\n\t\t'110',\r\n\t\t'100',\r\n\t\t'111'\r\n\t],\r\n\t'F': [\r\n\t\t'111',\r\n\t\t'100',\r\n\t\t'110',\r\n\t\t'100'\r\n\t],\r\n\t'G': [\r\n\t\t'111',\r\n\t\t'100',\r\n\t\t'101',\r\n\t\t'111'\r\n\t],\r\n\t'H': [\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'111',\r\n\t\t'101'\r\n\t],\r\n\t'I': [\r\n\t\t'1',\r\n\t\t'1',\r\n\t\t'1',\r\n\t\t'1'\r\n\t],\r\n\t'J': [\r\n\t\t'001',\r\n\t\t'001',\r\n\t\t'101',\r\n\t\t'111'\r\n\t],\r\n\t'K': [\r\n\t\t'101',\r\n\t\t'110',\r\n\t\t'101',\r\n\t\t'101'\r\n\t],\r\n\t'L': [\r\n\t\t'10',\r\n\t\t'10',\r\n\t\t'10',\r\n\t\t'11'\r\n\t],\r\n\t'M': [\r\n\t\t'11011',\r\n\t\t'11011',\r\n\t\t'10101',\r\n\t\t'10001'\r\n\t],\r\n\t'N': [\r\n\t\t'1001',\r\n\t\t'1101',\r\n\t\t'1011',\r\n\t\t'1001'\r\n\t],\r\n\t'O': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'111'\r\n\t],\r\n\t'P': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'111',\r\n\t\t'100'\r\n\t],\r\n\t'Q': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'111',\r\n\t\t'001'\r\n\t],\r\n\t'R': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'100',\r\n\t\t'100'\r\n\t],\r\n\t'S': [\r\n\t\t'111',\r\n\t\t'100',\r\n\t\t'111',\r\n\t\t'011'\r\n\t],\r\n\t'T': [\r\n\t\t'111',\r\n\t\t'010',\r\n\t\t'010',\r\n\t\t'010'\r\n\t],\r\n\t'U': [\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'111'\r\n\t],\r\n\t'V': [\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'010'\r\n\t],\r\n\t'W': [\r\n\t\t'10001',\r\n\t\t'10001',\r\n\t\t'10101',\r\n\t\t'01110'\r\n\t],\r\n\t'X': [\r\n\t\t'101',\r\n\t\t'010',\r\n\t\t'010',\r\n\t\t'101'\r\n\t],\r\n\t'Y': [\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'010',\r\n\t\t'010'\r\n\t],\r\n\t'Z': [\r\n\t\t'111',\r\n\t\t'011',\r\n\t\t'100',\r\n\t\t'111'\r\n\t],\r\n\t' ': [\r\n\t\t'0',\r\n\t\t'0',\r\n\t\t'0',\r\n\t\t'0'\r\n\t],\r\n\t'!': [\r\n\t\t'1',\r\n\t\t'1',\r\n\t\t'0',\r\n\t\t'1'\r\n\t],\r\n\t'?': [\r\n\t\t'111',\r\n\t\t'001',\r\n\t\t'000',\r\n\t\t'010'\r\n\t],\r\n\t'.': [\r\n\t\t'0',\r\n\t\t'0',\r\n\t\t'0',\r\n\t\t'1'\r\n\t],\r\n\t',': [\r\n\t\t'0',\r\n\t\t'0',\r\n\t\t'1',\r\n\t\t'1'\r\n\t],\r\n\t'+': [\r\n\t\t'000',\r\n\t\t'010',\r\n\t\t'111',\r\n\t\t'010'\r\n\t],\r\n\t'-': [\r\n\t\t'00',\r\n\t\t'00',\r\n\t\t'11',\r\n\t\t'00'\r\n\t],\r\n\t'=': [\r\n\t\t'000',\r\n\t\t'111',\r\n\t\t'000',\r\n\t\t'111'\r\n\t],\r\n\t'*': [\r\n\t\t'000',\r\n\t\t'101',\r\n\t\t'010',\r\n\t\t'101'\r\n\t],\r\n\t'_': [\r\n\t\t'000',\r\n\t\t'000',\r\n\t\t'000',\r\n\t\t'111'\r\n\t],\r\n\t'[': [\r\n\t\t'11',\r\n\t\t'10',\r\n\t\t'10',\r\n\t\t'11'\r\n\t],\r\n\t']': [\r\n\t\t'11',\r\n\t\t'01',\r\n\t\t'01',\r\n\t\t'11'\r\n\t],\r\n\t'(': [\r\n\t\t'01',\r\n\t\t'10',\r\n\t\t'10',\r\n\t\t'01'\r\n\t],\r\n\t')': [\r\n\t\t'10',\r\n\t\t'01',\r\n\t\t'01',\r\n\t\t'10'\r\n\t],\r\n\t'<': [\r\n\t\t'00',\r\n\t\t'01',\r\n\t\t'10',\r\n\t\t'01'\r\n\t],\r\n\t'>': [\r\n\t\t'00',\r\n\t\t'10',\r\n\t\t'01',\r\n\t\t'10'\r\n\t],\r\n\t'\\'': [\r\n\t\t'1',\r\n\t\t'1',\r\n\t\t'0',\r\n\t\t'0'\r\n\t],\r\n\t'\"': [\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'000',\r\n\t\t'000'\r\n\t],\r\n\t'`': [\r\n\t\t'10',\r\n\t\t'01',\r\n\t\t'00',\r\n\t\t'00'\r\n\t],\r\n\t'~': [\r\n\t\t'000',\r\n\t\t'110',\r\n\t\t'011',\r\n\t\t'000'\r\n\t],\r\n\t'/': [\r\n\t\t'001',\r\n\t\t'010',\r\n\t\t'010',\r\n\t\t'100'\r\n\t],\r\n\t'\\\\': [\r\n\t\t'100',\r\n\t\t'010',\r\n\t\t'010',\r\n\t\t'001'\r\n\t]\r\n});\r\n\r\nexport = font;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Bitmap = require('../core/Bitmap');\r\nimport ILoader = require('./ILoader');\r\n\r\nclass ImageDataLoader implements ILoader {\r\n\tpublic url: string;\r\n\r\n\tconstructor(url: string) {\r\n\t\tthis.url = url;\r\n\t}\r\n\r\n\tload(callback: (err: Error, data: ImageData) => void): void {\r\n\t\tvar image = document.createElement('img');\r\n\t\timage.onload = () => {\r\n\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\tcanvas.width = image.width;\r\n\t\t\tcanvas.height = image.height;\r\n\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\t\t\tctx.drawImage(image, 0, 0);\r\n\r\n\t\t\tcallback(null, ctx.getImageData(0, 0, image.width, image.height));\r\n\r\n\t\t\timage.onload = null;\r\n\t\t\timage.onerror = null;\r\n\t\t};\r\n\t\timage.onerror = () => {\r\n\t\t\tcallback(new Error('cannot load ' + this.url), null);\r\n\r\n\t\t\timage.onload = null;\r\n\t\t\timage.onerror = null;\r\n\t\t};\r\n\t\t// load it\r\n\t\timage.src = this.url;\r\n\t}\r\n}\r\n\r\nexport = ImageDataLoader;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Bitmap = require('../core/Bitmap');\r\n\r\nimport ILoader = require('./ILoader');\r\nimport ImageDataLoader = require('./ImageDataLoader');\r\n\r\nclass BitmapLoader implements ILoader {\r\n\tpublic url: string;\r\n\tpublic useAlpha: boolean;\r\n\r\n\tconstructor(url: string, useAlpha: boolean = false) {\r\n\t\tthis.url = url;\r\n\t\tthis.useAlpha = useAlpha;\r\n\t}\r\n\r\n\tload(callback: (err: Error, bitmap: Bitmap) => void): void {\r\n\t\tnew ImageDataLoader(this.url).load((err, image) => {\r\n\t\t\tif (err) {\r\n\t\t\t\tcallback(err, null);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.useAlpha) {\r\n\t\t\t\tcallback(null, new Bitmap(image.width, image.height, true, image.data.buffer));\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// resample, ditch alpha\r\n\t\t\t\tvar bitmap = new Bitmap(image.width, image.height, false);\r\n\t\t\t\tvar data = image.data;\r\n\t\t\t\tvar width = image.width;\r\n\r\n\t\t\t\tfor (var iy = 0; iy < image.height; iy++) {\r\n\t\t\t\t\tfor (var ix = 0; ix < width; ix++) {\r\n\t\t\t\t\t\tvar read = (iy * width + ix) * 4;\r\n\t\t\t\t\t\tvar write = (iy * width + ix) * 3;\r\n\r\n\t\t\t\t\t\tbitmap.data[write] = data[read];\r\n\t\t\t\t\t\tbitmap.data[write + 1] = data[read + 1];\r\n\t\t\t\t\t\tbitmap.data[write + 2] = data[read + 2];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcallback(null, bitmap);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport = BitmapLoader;\r\n","/// <reference path='../../typings/tsd.d.ts' />\r\n\r\n'use strict';\r\n\r\nimport ILoader = require('./ILoader');\r\n\r\n// https://en.wikipedia.org/wiki/XMLHttpRequest\r\nfunction getXHR() {\r\n\tif (XMLHttpRequest) {\r\n\t\treturn new XMLHttpRequest();\r\n\t}\r\n\ttry {\r\n\t\treturn new ActiveXObject('Msxml2.XMLHTTP.6.0');\r\n\t}\r\n\tcatch (e) {\r\n\t}\r\n\ttry {\r\n\t\treturn new ActiveXObject('Msxml2.XMLHTTP.3.0');\r\n\t}\r\n\tcatch (e) {\r\n\t}\r\n\ttry {\r\n\t\treturn new ActiveXObject('Microsoft.XMLHTTP');\r\n\t}\r\n\tcatch (e) {\r\n\t}\r\n\tthrow new Error('This browser does not support XMLHttpRequest.');\r\n}\r\n\r\nclass TextLoader implements ILoader {\r\n\tpublic url: string;\r\n\r\n\tconstructor(url: string) {\r\n\t\tthis.url = url;\r\n\t}\r\n\r\n\tload(callback: (err: Error, data: string) => void): void {\r\n\t\ttry {\r\n\t\t\tvar xhr = getXHR();\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tcallback(e, null);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\txhr.onreadystatechange = () => {\r\n\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\tcallback(null, xhr.responseText);\r\n\t\t\t}\r\n\t\t};\r\n\t\t// TODO add more errors? what if bad url?\r\n\t\txhr.open('GET', this.url, true);\r\n\t\txhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\r\n\t\txhr.send(null);\r\n\t}\r\n}\r\n\r\nexport = TextLoader;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport ILoader = require('./ILoader');\r\nimport TextLoader = require('./TextLoader');\r\n\r\nclass JSONLoader implements ILoader {\r\n\tpublic url: string;\r\n\r\n\tconstructor(url: string) {\r\n\t\tthis.url = url;\r\n\t}\r\n\r\n\tload(callback: (err: Error, json: any) => void): void {\r\n\t\tnew TextLoader(this.url).load((err, text) => {\r\n\t\t\tif (err) {\r\n\t\t\t\tcallback(err, null);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tvar obj = JSON.parse(text);\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tcallback(e, null);\r\n\t\t\t}\r\n\t\t\tcallback(null, obj);\r\n\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport = JSONLoader;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Bitmap = require('../core/Bitmap');\r\nimport SpriteSheet = require('../core/SpriteSheet');\r\n\r\nimport ILoader = require('./ILoader');\r\nimport ImageDataLoader = require('./ImageDataLoader');\r\nimport ISpriteSheetOpts = require('../types/ISpriteSheetOpts');\r\n\r\nclass SpriteSheetLoader implements ILoader {\r\n\tpublic url: string;\r\n\tpublic useAlpha: boolean;\r\n\tpublic opts: ISpriteSheetOpts;\r\n\r\n\tconstructor(url: string, opts: ISpriteSheetOpts, useAlpha: boolean = false) {\r\n\t\tthis.url = url;\r\n\t\tthis.opts = opts;\r\n\t\tthis.useAlpha = useAlpha;\r\n\t}\r\n\r\n\tload(callback: (err: Error, bitmap: SpriteSheet) => void): void {\r\n\t\tnew ImageDataLoader(this.url).load((err: Error, image: ImageData) => {\r\n\t\t\tif (err) {\r\n\t\t\t\tcallback(err, null);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// TODO limit total sprites when sheet not fully filled\r\n\r\n\t\t\t/* tslint:disable: max-line-length */\r\n\r\n\t\t\tvar outerMargin = (this.opts.outerMargin || 0);\r\n\t\t\tvar innerMargin = (this.opts.innerMargin || 0);\r\n\r\n\t\t\tvar sheet = new SpriteSheet(this.opts.spritesX, this.opts.spritesY);\r\n\r\n\t\t\tfor (var iy = 0; iy < this.opts.spritesY; iy++) {\r\n\t\t\t\tfor (var ix = 0; ix < this.opts.spritesX; ix++) {\r\n\t\t\t\t\tvar x = outerMargin + ix * (this.opts.sizeX + innerMargin);\r\n\t\t\t\t\tvar y = outerMargin + iy * (this.opts.sizeY + innerMargin);\r\n\t\t\t\t\tsheet.addSprite(Bitmap.clipFromData(image.data, image.width, image.height, 4, x, y, this.opts.sizeX, this.opts.sizeY, this.useAlpha));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcallback(null, sheet);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport = SpriteSheetLoader;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Bitmap = require('../core/Bitmap');\r\nimport SpriteSheet = require('../core/SpriteSheet');\r\nimport ILoader = require('./ILoader');\r\nimport JSONLoader = require('./JSONLoader');\r\nimport SpriteSheetLoader = require('./SpriteSheetLoader');\r\nimport ISpriteSheetOpts = require('../types/ISpriteSheetOpts');\r\n\r\nvar urlExp = /^(.*?)(\\/?)([^\\/]+?)$/;\r\n\r\nfunction getURL(main: string, append: string): string {\r\n\turlExp.lastIndex = 0;\r\n\tvar match = urlExp.exec(main);\r\n\treturn match[1] + match[2] + append;\r\n}\r\n\r\n\r\nclass SpriteSheetJSONLoader implements ILoader {\r\n\tpublic url: string;\r\n\tpublic useAlpha: boolean;\r\n\tpublic opts: ISpriteSheetOpts;\r\n\r\n\tconstructor(url: string, useAlpha: boolean = false) {\r\n\t\tthis.url = url;\r\n\t\tthis.useAlpha = useAlpha;\r\n\t}\r\n\r\n\tload(callback: (err: Error, sheet: SpriteSheet) => void): void {\r\n\t\tnew JSONLoader(this.url).load((err, json: ISpriteSheetOpts) => {\r\n\t\t\tif (err) {\r\n\t\t\t\tcallback(err, null);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconsole.log(json);\r\n\t\t\tnew SpriteSheetLoader(getURL(this.url, json.image), json, this.useAlpha).load(callback);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport = SpriteSheetJSONLoader;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport ILoader = require('./ILoader');\r\n\r\nclass MultiLoader {\r\n\tprivate queued: ILoader[] = [];\r\n\r\n\tconstructor(loaders?: ILoader[]) {\r\n\t\tif (loaders) {\r\n\t\t\tloaders.forEach((loader) => {\r\n\t\t\t\tthis.queued.push(loader);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tload(callback: (err: Error, results: any[]) => void): void {\r\n\t\tvar errored = false;\r\n\t\tvar results = new Array(this.queued.length);\r\n\r\n\t\t// TODO consider sanity limit?\r\n\r\n\t\tthis.queued.forEach((loader, index) => {\r\n\t\t\tloader.load((err, res) => {\r\n\t\t\t\tif (errored) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (err) {\r\n\t\t\t\t\tconsole.log(loader.url);\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\tcallback(err, null);\r\n\t\t\t\t\terrored = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tresults[index] = res;\r\n\t\t\t\tthis.queued[index] = null;\r\n\r\n\t\t\t\tif (this.queued.every(loader => !loader)) {\r\n\t\t\t\t\tcallback(err, results);\r\n\t\t\t\t\tthis.queued = null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport = MultiLoader;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport IBlock = require('./../types/IBlock');\r\n\r\n// helper ripped from https://stackoverflow.com/questions/15451321/how-can-i-make-html5-javascript-canvas-fill-window-screen\r\nexport function getViewport(): IBlock {\r\n\tvar e: any = window;\r\n\tvar a = 'inner';\r\n\tif (!('innerWidth' in window )) {\r\n\t\ta = 'client';\r\n\t\te = document.documentElement || document.body;\r\n\t}\r\n\treturn {width: e[a + 'Width'], height: e[a + 'Height']};\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Bitmap = require('../core/Bitmap');\r\n\r\n// TODO support arbitrary offsets and clipping\r\n\r\nclass SpriteSheet {\r\n\r\n\tprivate sprites: Bitmap[] = [];\r\n\tprivate width: number;\r\n\tprivate height: number;\r\n\r\n\tconstructor(width: number, height: number) {\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t}\r\n\r\n\tgetSprite(x: number, y: number): Bitmap {\r\n\t\treturn this.getSpriteAt(y * this.width + x);\r\n\t}\r\n\r\n\tgetSpriteAt(index: number): Bitmap {\r\n\t\tif (this.sprites.length === 0) {\r\n\t\t\tthrow new Error('sheet has zero images');\r\n\t\t}\r\n\t\treturn this.sprites[index % this.sprites.length];\r\n\t}\r\n\r\n\taddSprite(bitmap: Bitmap): void {\r\n\t\tthis.sprites.push(bitmap);\r\n\t}\r\n}\r\n\r\nexport = SpriteSheet;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Char = require('./Char');\r\n\r\nclass Font {\r\n\tpublic name: string;\r\n\tpublic height: number;\r\n\tpublic chars: {[char: string]: Char};\r\n\r\n\t// TODO assert height\r\n\r\n\tconstructor(name: string, height: number, data: Object) {\r\n\t\tthis.name = name;\r\n\t\tthis.height = height;\r\n\t\tthis.chars = Object.create(null);\r\n\r\n\t\tObject.keys(data).forEach((char) => {\r\n\t\t\tthis.chars[char] = new Char(char, data[char]);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport = Font;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nclass Char {\r\n\tpublic char: string;\r\n\tpublic width: number;\r\n\tpublic map: boolean[];\r\n\r\n\t// TODO assert line width\r\n\tconstructor(char: string, map: string[]) {\r\n\t\tthis.char = char;\r\n\t\tthis.width = map[0].length;\r\n\t\tthis.map = [];\r\n\r\n\t\tfor (var i = 0; i < map.length; i++) {\r\n\t\t\tvar line = map[i];\r\n\t\t\tfor (var c = 0; c < line.length; c++) {\r\n\t\t\t\tthis.map.push((line.charAt(c) === '1'));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport = Char;\r\n"],"sourceRoot":"webpack-module://"}